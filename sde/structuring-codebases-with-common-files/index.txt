3:I[9275,[],""]
6:I[1343,[],""]
7:I[6871,["98","static/chunks/98-98337b3bb708bd24.js","748","static/chunks/748-1f14ee6eb3d7029a.js","271","static/chunks/271-37a22bace913f735.js","185","static/chunks/app/layout-08611f287dda1230.js"],"default"]
8:I[5877,["98","static/chunks/98-98337b3bb708bd24.js","748","static/chunks/748-1f14ee6eb3d7029a.js","271","static/chunks/271-37a22bace913f735.js","185","static/chunks/app/layout-08611f287dda1230.js"],"default"]
9:I[902,["98","static/chunks/98-98337b3bb708bd24.js","748","static/chunks/748-1f14ee6eb3d7029a.js","271","static/chunks/271-37a22bace913f735.js","185","static/chunks/app/layout-08611f287dda1230.js"],""]
a:I[5218,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
b:I[2324,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
c:I[2591,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
d:I[231,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
e:I[3180,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
f:I[3245,["98","static/chunks/98-98337b3bb708bd24.js","748","static/chunks/748-1f14ee6eb3d7029a.js","271","static/chunks/271-37a22bace913f735.js","185","static/chunks/app/layout-08611f287dda1230.js"],"default"]
4:["categorySlug","sde","d"]
5:["postOrSeriesSlug","structuring-codebases-with-common-files","d"]
0:["WaLb_sZ3RF-6dnakeG92A",[[["",{"children":[["categorySlug","sde","d"],{"children":[["postOrSeriesSlug","structuring-codebases-with-common-files","d"],{"children":["__PAGE__?{\"categorySlug\":\"sde\",\"postOrSeriesSlug\":\"structuring-codebases-with-common-files\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":[["categorySlug","sde","d"],{"children":[["postOrSeriesSlug","structuring-codebases-with-common-files","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children","$5","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__className_d65c78","children":["$","$L7",null,{"children":[["$","$L8",null,{}],["$","$L9",null,{"maxWidth":"lg","children":[["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","$La",null,{"children":[["$","$Lb",null,{"render":false,"targetSiteNavigationState":[],"targetPageNavigationState":[]}],["$","$Lc",null,{"variant":"h4","children":["$","strong",null,{"children":"Not Found"}]}],["$","$Lc",null,{"variant":"h6","mb":3,"children":"Oops! It looks like the page you're looking for does not exist."}],["$","$Ld",null,{"href":"/","children":["$","$Le",null,{"variant":"contained","sx":{"marginRight":5,"marginBottom":1},"children":"Take me Home"}]}]]}],"notFoundStyles":[],"styles":null}],["$","$Lf",null,{}]]}]]}]}]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/1d4d01086947be98.css","precedence":"next","crossOrigin":"$undefined"}]],"$L10"]]]]
10:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","link","2",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
1:null
11:I[3507,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
13:I[4204,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
14:I[1847,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
15:I[8125,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
16:I[3578,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
17:I[7005,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
18:I[6480,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
19:T9b2,from json import dumps as json_dumps, loads as json_loads
from os import environ
from time import time

from huey import RedisHuey

from .redis_client import redis_client


REDIS_HOST = environ["REDIS_HOST"]

huey = RedisHuey("entrypoint", host=REDIS_HOST)

task_status_map_key = "long_tasks"
task_length = 100_000_000
task_num_intervals = 100


def validate_task_id(task_id):
    progress_str = redis_client.hget(task_status_map_key, task_id)
    return progress_str is not None


def get_task_progress(task_id):
    progress_str = redis_client.hget(task_status_map_key, task_id)
    if progress_str is None:
        return {
            'message': "Task not found."
        }

    return json_loads(progress_str)


def update_task_progress(task_id, time_elapsed, progress_percentage, status="Processing"):
    task_progress = {
        'status': status,
        'timeElapsed': str(round(time_elapsed, 4)),
        'progress': str(round(progress_percentage, 4)),
    }
    task_progress_str = json_dumps(task_progress)

    redis_client.hset(task_status_map_key, task_id, task_progress_str)


def mark_task_as_failed(task_id, time_elapsed=None, progress_percentage=None):
    task_progress = get_task_progress(task_id)

    if time_elapsed is not None:
        task_progress['timeElapsed'] = str(round(time_elapsed, 4))

    if progress_percentage is not None:
        task_progress['progress'] = str(round(progress_percentage, 4))

    task_progress['status'] = "Failed"
    task_progress['failedAt'] = task_progress['progress']

    task_progress_str = json_dumps(task_progress)

    redis_client.hset(task_status_map_key, task_id, task_progress_str)


@huey.task()
def long_task(task_id: str):
    progress_update_interval = task_length / task_num_intervals

    start_time = time()

    update_task_progress(task_id, 0, 0)

    count = 0
    for i in range(1, task_length + 1):
        try:
            count += 1

            if i % progress_update_interval == 0:
                time_elapsed = time() - start_time
                progress_percentage = (count / task_length) * 100
                update_task_progress(task_id, time_elapsed, progress_percentage)
        except:
            time_elapsed = time() - start_time
            progress_percentage = (count / task_length) * 100

            mark_task_as_failed(task_id, time_elapsed, progress_percentage)

    time_elapsed = time() - start_time
    update_task_progress(task_id, time_elapsed, 100, status="Completed")1a:T4c0,from os import environ

from fastapi import FastAPI
from fastapi.responses import JSONResponse
import prometheus_client

from .tasks import get_task_progress, long_task, update_task_progress, validate_task_id
from .utils import generate_task_id

METRICS_PORT = int(environ["METRICS_PORT"])
prometheus_client.start_http_server(METRICS_PORT)

app = FastAPI()


@app.post("/api/tasks/add")
def add_task():
    new_task_id = generate_task_id()
    update_task_progress(new_task_id, 0, 0, status="Queued")

    long_task(new_task_id)

    return JSONResponse(status_code=200, content={
        'success': True,
        'result': {
            "id": new_task_id,
            'message': "Task queued.",
        },
    })


@app.get("/api/tasks/status/{task_id}")
async def get_task_status(task_id: str):
    if not validate_task_id(task_id):
        return JSONResponse(status_code=404, content={
            'success': False,
            'error': {
                'message': "Task not found.",
            },
        })

    task_progress = get_task_progress(task_id)

    return JSONResponse(status_code=200, content={
        'success': True,
        'result': {
            'progress': task_progress,
        },
    })2:["$","$La",null,{"mb":5,"pb":2,"sx":{"width":"100%","display":"flex","flexDirection":"column","justifyContent":"flex-start","alignItems":"flex-start"},"children":[["$","$Lb",null,{"render":true,"targetSiteNavigationState":[{"absoluteSlug":"/sde","title":"Software Engineering"},{"absoluteSlug":"/sde/structuring-codebases-with-common-files","title":"Three ways to Structure a Codebase containing Multiple Applications"}],"targetPageNavigationState":[{"title":"Expectations","absoluteSlug":"#expectations"},{"title":"Common Files","absoluteSlug":"#common-files"},{"title":"Producer","absoluteSlug":"#producer"},{"title":"Consumer","absoluteSlug":"#consumer"},{"title":"Method 1: Two Directories with Duplicate Files","absoluteSlug":"#method-1:-two-directories-with-duplicate-files"},{"title":"Method 2: `Common` Directory with the common files","absoluteSlug":"#method-2:-`common`-directory-with-the-common-files"},{"title":"Method 3: A single Directory","absoluteSlug":"#method-3:-a-single-directory"},{"title":"Conclusion","absoluteSlug":"#conclusion"}]}],["$","$L11",null,{"container":true,"spacing":2,"mb":0,"children":[["$","$L11",null,{"item":true,"xs":12,"sm":12,"md":4,"sx":{"background":"linear-gradient(to right, #eeeeee, #ffffff)","borderRadius":5},"children":["$","$La",null,{"sx":{"width":"100%","height":"100%","display":"flex","flexDirection":"column","justifyContent":"center","alignItems":"flex-start","paddingBottom":2},"children":[["$","$Lc",null,{"gutterBottom":true,"variant":"h5","component":"h1","children":"Three ways to Structure a Codebase containing Multiple Applications"}],["$","$Lc",null,{"gutterBottom":true,"variant":"p","component":"p","mb":4,"children":"It is common to find codebases (monorepos) in which logic is repeated across multiple applications. We evaluate three ways to structure such codebases for ease of development, version control, and deployment."}],["$","$La",null,{"sx":{"width":"100%","display":"flex","flexDirection":"row","justifyContent":"space-between","alignItems":"center","marginBottom":2},"children":[["$","$Lc",null,{"gutterBottom":true,"variant":"p","component":"p","children":"2024-03-17"}],["$","$Lc",null,{"gutterBottom":true,"variant":"p","component":"p","children":["06m"," Read"]}]]}],"$L12",false]}]}],["$","$L11",null,{"item":true,"xs":12,"sm":12,"md":8,"children":["$","$La",null,{"sx":{"flex":1,"display":"flex","flexDirection":"column","justifyContent":"center","alignItems":"center","marginRight":2},"children":["$","img",null,{"src":"/media/images/structuring-codebases-with-common-files-thumbnail.jpg","style":{"width":"100%","maxWidth":"75vw","height":"auto","maxHeight":"35vh","objectFit":"cover"}}]}]}]]}],["$","$La",null,{"sx":{"width":"100%"},"children":["$","$L11",null,{"container":true,"spacing":2,"mt":4,"mb":0,"children":[["$","$L11",null,{"item":true,"xs":12,"sm":12,"md":4,"lg":3,"sx":{"background":"linear-gradient(to right, #eeeeee, #ffffff)","borderRadius":5},"children":["$","$La",null,{"sx":{"width":"100%"},"children":[["$","$La",null,{"sx":{"width":"100%","display":{"xs":"block","md":"none"},"marginBottom":2},"children":["$","$L13",null,{"sx":{"width":"100%","marginBottom":2,"boxShadow":3,"backgroundColor":"#ffffff22"},"disableGutters":true,"children":[["$","$L14",null,{"expandIcon":["$","$L15",null,{}],"children":["$","$Lc",null,{"variant":"h6","component":"h6","sx":{"margin":0,"padding":0},"children":"Table of Contents"}]}],["$","$L16",null,{"sx":{"width":"90%","display":"flex","flexDirection":"column","justifyContent":"flex-start","alignItems":"flex-start","marginBottom":2},"children":[["$","a","0",{"href":"#expectations","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","0",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Expectations"}]}],["$","a","1",{"href":"#common-files","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","1",{"variant":"p","component":"p","ml":1,"mb":2,"sx":{"&:hover":{"color":"blue"}},"children":"Common Files"}]}],["$","a","2",{"href":"#producer","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","2",{"variant":"p","component":"p","ml":1,"mb":2,"sx":{"&:hover":{"color":"blue"}},"children":"Producer"}]}],["$","a","3",{"href":"#consumer","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","3",{"variant":"p","component":"p","ml":1,"mb":2,"sx":{"&:hover":{"color":"blue"}},"children":"Consumer"}]}],["$","a","4",{"href":"#method-1:-two-directories-with-duplicate-files","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","4",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Method 1: Two Directories with Duplicate Files"}]}],["$","a","5",{"href":"#method-2:-`common`-directory-with-the-common-files","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","5",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Method 2: `Common` Directory with the common files"}]}],["$","a","6",{"href":"#method-3:-a-single-directory","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","6",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Method 3: A single Directory"}]}],["$","a","7",{"href":"#conclusion","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","7",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Conclusion"}]}]]}]]}]}],["$","$La",null,{"sx":{"width":"100%","display":{"xs":"none","md":"block"}},"children":[["$","$Lc",null,{"variant":"h5","component":"h5","sx":{"margin":0,"padding":0},"children":"Table of Contents"}],[["$","a","0",{"href":"#expectations","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","0",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Expectations"}]}],["$","a","1",{"href":"#common-files","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","1",{"variant":"p","component":"p","ml":1,"mb":2,"sx":{"&:hover":{"color":"blue"}},"children":"Common Files"}]}],["$","a","2",{"href":"#producer","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","2",{"variant":"p","component":"p","ml":1,"mb":2,"sx":{"&:hover":{"color":"blue"}},"children":"Producer"}]}],["$","a","3",{"href":"#consumer","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","3",{"variant":"p","component":"p","ml":1,"mb":2,"sx":{"&:hover":{"color":"blue"}},"children":"Consumer"}]}],["$","a","4",{"href":"#method-1:-two-directories-with-duplicate-files","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","4",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Method 1: Two Directories with Duplicate Files"}]}],["$","a","5",{"href":"#method-2:-`common`-directory-with-the-common-files","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","5",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Method 2: `Common` Directory with the common files"}]}],["$","a","6",{"href":"#method-3:-a-single-directory","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","6",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Method 3: A single Directory"}]}],["$","a","7",{"href":"#conclusion","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","7",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Conclusion"}]}]]]}]]}]}],["$","$L11",null,{"item":true,"xs":12,"sm":12,"md":8,"lg":9,"sx":{"background":"linear-gradient(to right, #ffffff, #eeeeee)","borderRadius":5},"children":["$","$La",null,{"sx":{"flex":1,"marginRight":2},"children":[["$","$Lc","0",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","In this Blog Post, we cover three ways to structure a multi-application code base with common files between the applications."]}],["$","$Lc","1",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","We evaluate the different methods on the basis of:"]}],["$","$Lc","2",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Ease of development"]}],["$","$Lc","3",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","2) Ease of Version Control"]}],["$","$Lc","4",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","3) Building a Docker image and deploying"]}],["$","$Lc","5",{"id":"expectations","variant":"h4","component":"h1","mb":2,"children":["$","strong",null,{"children":"Expectations"}]}],["$","$Lc","6",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","I have a very simple demo application: a producer and a consumer that produce and consume tasks for the ",["$","$L17","6-link",{"href":"https://huey.readthedocs.io/en/latest/","rel":"noopener noreferrer","target":"_blank","color":"primary","underline":"hover","children":"Huey"}]," task queue. The producer and consumer are two separate applications but they have some files in common: such as the ",["$","$La","6-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"redis_client.py"}]," file that sets up the connection to Redis, or the ",["$","$La","6-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"tasks.py"}]," file that defines the tasks that have to be produced or consumed."]}],["$","$Lc","7",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Once the development of the applications is complete, we will also be building two Docker images for the producer and consumer and pushing them to Docker Hub."]}],["$","$Lc","8",{"id":"common-files","variant":"h5","component":"h2","mb":2,"children":["$","strong",null,{"children":"Common Files"}]}],["$","$Lc","9",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Both applications have two files in common. The first one is the ",["$","$La","9-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"redis_client.py"}]," file that contains our Redis connection:"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"from os import environ\n\nfrom redis import Redis\n\n\nREDIS_HOST = environ[\"REDIS_HOST\"]\nREDIS_PORT = int(environ[\"REDIS_PORT\"])\nREDIS_DB = (environ[\"REDIS_DB\"])\nREDIS_PASSWORD = environ.get(\"REDIS_PASSWORD\", None)\n\nredis_client = Redis(host=REDIS_HOST, port=REDIS_PORT, db=REDIS_DB, password=REDIS_PASSWORD, decode_responses=True)\n"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":[" os "]}],["$","span","code-segement2",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[" environ\n"]}],"\n",["$","span","code-segement5",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement6",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement7",{"className":"$undefined","style":{},"children":[" redis "]}],["$","span","code-segement8",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement9",{"className":"$undefined","style":{},"children":[" Redis\n"]}],"\n","\n",["$","span","code-segement12",{"className":"$undefined","style":{},"children":["REDIS_HOST "]}],["$","span","code-segement13",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement14",{"className":"$undefined","style":{},"children":[" environ"]}],["$","span","code-segement15",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement16",{"className":"token","style":{"color":"#116b00"},"children":["\"REDIS_HOST\""]}],["$","span","code-segement17",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement18",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement19",{"className":"$undefined","style":{},"children":["REDIS_PORT "]}],["$","span","code-segement20",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement21",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement22",{"className":"token","style":{"color":"#af00af"},"children":["int"]}],["$","span","code-segement23",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement24",{"className":"$undefined","style":{},"children":["environ"]}],["$","span","code-segement25",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement26",{"className":"token","style":{"color":"#116b00"},"children":["\"REDIS_PORT\""]}],["$","span","code-segement27",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement28",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement29",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement30",{"className":"$undefined","style":{},"children":["REDIS_DB "]}],["$","span","code-segement31",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement32",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement33",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement34",{"className":"$undefined","style":{},"children":["environ"]}],["$","span","code-segement35",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement36",{"className":"token","style":{"color":"#116b00"},"children":["\"REDIS_DB\""]}],["$","span","code-segement37",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement38",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement39",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement40",{"className":"$undefined","style":{},"children":["REDIS_PASSWORD "]}],["$","span","code-segement41",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement42",{"className":"$undefined","style":{},"children":[" environ"]}],["$","span","code-segement43",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement44",{"className":"$undefined","style":{},"children":["get"]}],["$","span","code-segement45",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement46",{"className":"token","style":{"color":"#116b00"},"children":["\"REDIS_PASSWORD\""]}],["$","span","code-segement47",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement48",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement49",{"className":"token","style":{"color":"#755f00"},"children":["None"]}],["$","span","code-segement50",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement51",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement53",{"className":"$undefined","style":{},"children":["redis_client "]}],["$","span","code-segement54",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement55",{"className":"$undefined","style":{},"children":[" Redis"]}],["$","span","code-segement56",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement57",{"className":"$undefined","style":{},"children":["host"]}],["$","span","code-segement58",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement59",{"className":"$undefined","style":{},"children":["REDIS_HOST"]}],["$","span","code-segement60",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement61",{"className":"$undefined","style":{},"children":[" port"]}],["$","span","code-segement62",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement63",{"className":"$undefined","style":{},"children":["REDIS_PORT"]}],["$","span","code-segement64",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement65",{"className":"$undefined","style":{},"children":[" db"]}],["$","span","code-segement66",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement67",{"className":"$undefined","style":{},"children":["REDIS_DB"]}],["$","span","code-segement68",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement69",{"className":"$undefined","style":{},"children":[" password"]}],["$","span","code-segement70",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement71",{"className":"$undefined","style":{},"children":["REDIS_PASSWORD"]}],["$","span","code-segement72",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement73",{"className":"$undefined","style":{},"children":[" decode_responses"]}],["$","span","code-segement74",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement75",{"className":"token","style":{"color":"#755f00"},"children":["True"]}],["$","span","code-segement76",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement77",{"className":"$undefined","style":{},"children":["\n"]}],""]]}]}]]}],["$","$Lc","11",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","The second file is the ",["$","$La","11-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"tasks.py"}]," file that contains the tasks registered in Huey as well as some utility functions:"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"$19"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":[" json "]}],["$","span","code-segement2",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[" dumps "]}],["$","span","code-segement4",{"className":"token","style":{"color":"#a04900"},"children":["as"]}],["$","span","code-segement5",{"className":"$undefined","style":{},"children":[" json_dumps"]}],["$","span","code-segement6",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement7",{"className":"$undefined","style":{},"children":[" loads "]}],["$","span","code-segement8",{"className":"token","style":{"color":"#a04900"},"children":["as"]}],["$","span","code-segement9",{"className":"$undefined","style":{},"children":[" json_loads\n"]}],["$","span","code-segement10",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement11",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement12",{"className":"$undefined","style":{},"children":[" os "]}],["$","span","code-segement13",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement14",{"className":"$undefined","style":{},"children":[" environ\n"]}],["$","span","code-segement15",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement16",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement17",{"className":"$undefined","style":{},"children":[" time "]}],["$","span","code-segement18",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement19",{"className":"$undefined","style":{},"children":[" time\n"]}],"\n",["$","span","code-segement21",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement22",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement23",{"className":"$undefined","style":{},"children":[" huey "]}],["$","span","code-segement24",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement25",{"className":"$undefined","style":{},"children":[" RedisHuey\n"]}],"\n",["$","span","code-segement27",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement28",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement29",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement30",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement31",{"className":"$undefined","style":{},"children":["redis_client "]}],["$","span","code-segement32",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement33",{"className":"$undefined","style":{},"children":[" redis_client\n"]}],"\n","\n",["$","span","code-segement36",{"className":"$undefined","style":{},"children":["REDIS_HOST "]}],["$","span","code-segement37",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement38",{"className":"$undefined","style":{},"children":[" environ"]}],["$","span","code-segement39",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement40",{"className":"token","style":{"color":"#116b00"},"children":["\"REDIS_HOST\""]}],["$","span","code-segement41",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement42",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement44",{"className":"$undefined","style":{},"children":["huey "]}],["$","span","code-segement45",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement46",{"className":"$undefined","style":{},"children":[" RedisHuey"]}],["$","span","code-segement47",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement48",{"className":"token","style":{"color":"#116b00"},"children":["\"entrypoint\""]}],["$","span","code-segement49",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement50",{"className":"$undefined","style":{},"children":[" host"]}],["$","span","code-segement51",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement52",{"className":"$undefined","style":{},"children":["REDIS_HOST"]}],["$","span","code-segement53",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement54",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement56",{"className":"$undefined","style":{},"children":["task_status_map_key "]}],["$","span","code-segement57",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement58",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement59",{"className":"token","style":{"color":"#116b00"},"children":["\"long_tasks\""]}],["$","span","code-segement60",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement61",{"className":"$undefined","style":{},"children":["task_length "]}],["$","span","code-segement62",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement63",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement64",{"className":"token","style":{"color":"#755f00"},"children":["100_000_000"]}],["$","span","code-segement65",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement66",{"className":"$undefined","style":{},"children":["task_num_intervals "]}],["$","span","code-segement67",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement68",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement69",{"className":"token","style":{"color":"#755f00"},"children":["100"]}],["$","span","code-segement70",{"className":"$undefined","style":{},"children":["\n"]}],"\n","\n",["$","span","code-segement73",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement74",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement75",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement76",{"className":"token","style":{"color":"#7c00aa"},"children":["validate_task_id"]}],["$","span","code-segement77",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement78",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement79",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement80",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement81",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement82",{"className":"$undefined","style":{},"children":["    progress_str "]}],["$","span","code-segement83",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement84",{"className":"$undefined","style":{},"children":[" redis_client"]}],["$","span","code-segement85",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement86",{"className":"$undefined","style":{},"children":["hget"]}],["$","span","code-segement87",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement88",{"className":"$undefined","style":{},"children":["task_status_map_key"]}],["$","span","code-segement89",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement90",{"className":"$undefined","style":{},"children":[" task_id"]}],["$","span","code-segement91",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement92",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement93",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement94",{"className":"token","style":{"color":"#a04900"},"children":["return"]}],["$","span","code-segement95",{"className":"$undefined","style":{},"children":[" progress_str "]}],["$","span","code-segement96",{"className":"token","style":{"color":"#a04900"},"children":["is"]}],["$","span","code-segement97",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement98",{"className":"token","style":{"color":"#a04900"},"children":["not"]}],["$","span","code-segement99",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement100",{"className":"token","style":{"color":"#755f00"},"children":["None"]}],["$","span","code-segement101",{"className":"$undefined","style":{},"children":["\n"]}],"\n","\n",["$","span","code-segement104",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement105",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement106",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement107",{"className":"token","style":{"color":"#7c00aa"},"children":["get_task_progress"]}],["$","span","code-segement108",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement109",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement110",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement111",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement112",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement113",{"className":"$undefined","style":{},"children":["    progress_str "]}],["$","span","code-segement114",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement115",{"className":"$undefined","style":{},"children":[" redis_client"]}],["$","span","code-segement116",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement117",{"className":"$undefined","style":{},"children":["hget"]}],["$","span","code-segement118",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement119",{"className":"$undefined","style":{},"children":["task_status_map_key"]}],["$","span","code-segement120",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement121",{"className":"$undefined","style":{},"children":[" task_id"]}],["$","span","code-segement122",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement123",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement124",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement125",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement126",{"className":"$undefined","style":{},"children":[" progress_str "]}],["$","span","code-segement127",{"className":"token","style":{"color":"#a04900"},"children":["is"]}],["$","span","code-segement128",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement129",{"className":"token","style":{"color":"#755f00"},"children":["None"]}],["$","span","code-segement130",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement131",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement132",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement133",{"className":"token","style":{"color":"#a04900"},"children":["return"]}],["$","span","code-segement134",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement135",{"className":"token","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement136",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement137",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement138",{"className":"token","style":{"color":"#116b00"},"children":["'message'"]}],["$","span","code-segement139",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement140",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement141",{"className":"token","style":{"color":"#116b00"},"children":["\"Task not found.\""]}],["$","span","code-segement142",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement143",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement144",{"className":"token","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement145",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement147",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement148",{"className":"token","style":{"color":"#a04900"},"children":["return"]}],["$","span","code-segement149",{"className":"$undefined","style":{},"children":[" json_loads"]}],["$","span","code-segement150",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement151",{"className":"$undefined","style":{},"children":["progress_str"]}],["$","span","code-segement152",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement153",{"className":"$undefined","style":{},"children":["\n"]}],"\n","\n",["$","span","code-segement156",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement157",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement158",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement159",{"className":"token","style":{"color":"#7c00aa"},"children":["update_task_progress"]}],["$","span","code-segement160",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement161",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement162",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement163",{"className":"$undefined","style":{},"children":[" time_elapsed"]}],["$","span","code-segement164",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement165",{"className":"$undefined","style":{},"children":[" progress_percentage"]}],["$","span","code-segement166",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement167",{"className":"$undefined","style":{},"children":[" status"]}],["$","span","code-segement168",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement169",{"className":"token","style":{"color":"#116b00"},"children":["\"Processing\""]}],["$","span","code-segement170",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement171",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement172",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement173",{"className":"$undefined","style":{},"children":["    task_progress "]}],["$","span","code-segement174",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement175",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement176",{"className":"token","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement177",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement178",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement179",{"className":"token","style":{"color":"#116b00"},"children":["'status'"]}],["$","span","code-segement180",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement181",{"className":"$undefined","style":{},"children":[" status"]}],["$","span","code-segement182",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement183",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement184",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement185",{"className":"token","style":{"color":"#116b00"},"children":["'timeElapsed'"]}],["$","span","code-segement186",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement187",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement188",{"className":"token","style":{"color":"#af00af"},"children":["str"]}],["$","span","code-segement189",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement190",{"className":"token","style":{"color":"#af00af"},"children":["round"]}],["$","span","code-segement191",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement192",{"className":"$undefined","style":{},"children":["time_elapsed"]}],["$","span","code-segement193",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement194",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement195",{"className":"token","style":{"color":"#755f00"},"children":["4"]}],["$","span","code-segement196",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement197",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement198",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement199",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement200",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement201",{"className":"token","style":{"color":"#116b00"},"children":["'progress'"]}],["$","span","code-segement202",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement203",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement204",{"className":"token","style":{"color":"#af00af"},"children":["str"]}],["$","span","code-segement205",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement206",{"className":"token","style":{"color":"#af00af"},"children":["round"]}],["$","span","code-segement207",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement208",{"className":"$undefined","style":{},"children":["progress_percentage"]}],["$","span","code-segement209",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement210",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement211",{"className":"token","style":{"color":"#755f00"},"children":["4"]}],["$","span","code-segement212",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement213",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement214",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement215",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement216",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement217",{"className":"token","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement218",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement219",{"className":"$undefined","style":{},"children":["    task_progress_str "]}],["$","span","code-segement220",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement221",{"className":"$undefined","style":{},"children":[" json_dumps"]}],["$","span","code-segement222",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement223",{"className":"$undefined","style":{},"children":["task_progress"]}],["$","span","code-segement224",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement225",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement227",{"className":"$undefined","style":{},"children":["    redis_client"]}],["$","span","code-segement228",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement229",{"className":"$undefined","style":{},"children":["hset"]}],["$","span","code-segement230",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement231",{"className":"$undefined","style":{},"children":["task_status_map_key"]}],["$","span","code-segement232",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement233",{"className":"$undefined","style":{},"children":[" task_id"]}],["$","span","code-segement234",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement235",{"className":"$undefined","style":{},"children":[" task_progress_str"]}],["$","span","code-segement236",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement237",{"className":"$undefined","style":{},"children":["\n"]}],"\n","\n",["$","span","code-segement240",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement241",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement242",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement243",{"className":"token","style":{"color":"#7c00aa"},"children":["mark_task_as_failed"]}],["$","span","code-segement244",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement245",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement246",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement247",{"className":"$undefined","style":{},"children":[" time_elapsed"]}],["$","span","code-segement248",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement249",{"className":"token","style":{"color":"#755f00"},"children":["None"]}],["$","span","code-segement250",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement251",{"className":"$undefined","style":{},"children":[" progress_percentage"]}],["$","span","code-segement252",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement253",{"className":"token","style":{"color":"#755f00"},"children":["None"]}],["$","span","code-segement254",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement255",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement256",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement257",{"className":"$undefined","style":{},"children":["    task_progress "]}],["$","span","code-segement258",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement259",{"className":"$undefined","style":{},"children":[" get_task_progress"]}],["$","span","code-segement260",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement261",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement262",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement263",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement265",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement266",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement267",{"className":"$undefined","style":{},"children":[" time_elapsed "]}],["$","span","code-segement268",{"className":"token","style":{"color":"#a04900"},"children":["is"]}],["$","span","code-segement269",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement270",{"className":"token","style":{"color":"#a04900"},"children":["not"]}],["$","span","code-segement271",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement272",{"className":"token","style":{"color":"#755f00"},"children":["None"]}],["$","span","code-segement273",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement274",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement275",{"className":"$undefined","style":{},"children":["        task_progress"]}],["$","span","code-segement276",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement277",{"className":"token","style":{"color":"#116b00"},"children":["'timeElapsed'"]}],["$","span","code-segement278",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement279",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement280",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement281",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement282",{"className":"token","style":{"color":"#af00af"},"children":["str"]}],["$","span","code-segement283",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement284",{"className":"token","style":{"color":"#af00af"},"children":["round"]}],["$","span","code-segement285",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement286",{"className":"$undefined","style":{},"children":["time_elapsed"]}],["$","span","code-segement287",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement288",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement289",{"className":"token","style":{"color":"#755f00"},"children":["4"]}],["$","span","code-segement290",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement291",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement292",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement294",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement295",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement296",{"className":"$undefined","style":{},"children":[" progress_percentage "]}],["$","span","code-segement297",{"className":"token","style":{"color":"#a04900"},"children":["is"]}],["$","span","code-segement298",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement299",{"className":"token","style":{"color":"#a04900"},"children":["not"]}],["$","span","code-segement300",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement301",{"className":"token","style":{"color":"#755f00"},"children":["None"]}],["$","span","code-segement302",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement303",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement304",{"className":"$undefined","style":{},"children":["        task_progress"]}],["$","span","code-segement305",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement306",{"className":"token","style":{"color":"#116b00"},"children":["'progress'"]}],["$","span","code-segement307",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement308",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement309",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement310",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement311",{"className":"token","style":{"color":"#af00af"},"children":["str"]}],["$","span","code-segement312",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement313",{"className":"token","style":{"color":"#af00af"},"children":["round"]}],["$","span","code-segement314",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement315",{"className":"$undefined","style":{},"children":["progress_percentage"]}],["$","span","code-segement316",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement317",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement318",{"className":"token","style":{"color":"#755f00"},"children":["4"]}],["$","span","code-segement319",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement320",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement321",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement323",{"className":"$undefined","style":{},"children":["    task_progress"]}],["$","span","code-segement324",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement325",{"className":"token","style":{"color":"#116b00"},"children":["'status'"]}],["$","span","code-segement326",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement327",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement328",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement329",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement330",{"className":"token","style":{"color":"#116b00"},"children":["\"Failed\""]}],["$","span","code-segement331",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement332",{"className":"$undefined","style":{},"children":["    task_progress"]}],["$","span","code-segement333",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement334",{"className":"token","style":{"color":"#116b00"},"children":["'failedAt'"]}],["$","span","code-segement335",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement336",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement337",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement338",{"className":"$undefined","style":{},"children":[" task_progress"]}],["$","span","code-segement339",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement340",{"className":"token","style":{"color":"#116b00"},"children":["'progress'"]}],["$","span","code-segement341",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement342",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement344",{"className":"$undefined","style":{},"children":["    task_progress_str "]}],["$","span","code-segement345",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement346",{"className":"$undefined","style":{},"children":[" json_dumps"]}],["$","span","code-segement347",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement348",{"className":"$undefined","style":{},"children":["task_progress"]}],["$","span","code-segement349",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement350",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement352",{"className":"$undefined","style":{},"children":["    redis_client"]}],["$","span","code-segement353",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement354",{"className":"$undefined","style":{},"children":["hset"]}],["$","span","code-segement355",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement356",{"className":"$undefined","style":{},"children":["task_status_map_key"]}],["$","span","code-segement357",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement358",{"className":"$undefined","style":{},"children":[" task_id"]}],["$","span","code-segement359",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement360",{"className":"$undefined","style":{},"children":[" task_progress_str"]}],["$","span","code-segement361",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement362",{"className":"$undefined","style":{},"children":["\n"]}],"\n","\n",["$","span","code-segement365",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement366",{"className":"token decorator annotation","style":{"color":"#111b27"},"children":["@huey"]}],["$","span","code-segement367",{"className":"token decorator annotation","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement368",{"className":"token decorator annotation","style":{"color":"#111b27"},"children":["task"]}],["$","span","code-segement369",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement370",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement371",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement372",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement373",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement374",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement375",{"className":"token","style":{"color":"#7c00aa"},"children":["long_task"]}],["$","span","code-segement376",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement377",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement378",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement379",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement380",{"className":"token","style":{"color":"#af00af"},"children":["str"]}],["$","span","code-segement381",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement382",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement383",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement384",{"className":"$undefined","style":{},"children":["    progress_update_interval "]}],["$","span","code-segement385",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement386",{"className":"$undefined","style":{},"children":[" task_length "]}],["$","span","code-segement387",{"className":"token","style":{"color":"#a04900"},"children":["/"]}],["$","span","code-segement388",{"className":"$undefined","style":{},"children":[" task_num_intervals\n"]}],"\n",["$","span","code-segement390",{"className":"$undefined","style":{},"children":["    start_time "]}],["$","span","code-segement391",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement392",{"className":"$undefined","style":{},"children":[" time"]}],["$","span","code-segement393",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement394",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement395",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement397",{"className":"$undefined","style":{},"children":["    update_task_progress"]}],["$","span","code-segement398",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement399",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement400",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement401",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement402",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement403",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement404",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement405",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement406",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement407",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement409",{"className":"$undefined","style":{},"children":["    count "]}],["$","span","code-segement410",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement411",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement412",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement413",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement414",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement415",{"className":"token","style":{"color":"#a04900"},"children":["for"]}],["$","span","code-segement416",{"className":"$undefined","style":{},"children":[" i "]}],["$","span","code-segement417",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement418",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement419",{"className":"token","style":{"color":"#af00af"},"children":["range"]}],["$","span","code-segement420",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement421",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement422",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement423",{"className":"$undefined","style":{},"children":[" task_length "]}],["$","span","code-segement424",{"className":"token","style":{"color":"#a04900"},"children":["+"]}],["$","span","code-segement425",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement426",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement427",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement428",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement429",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement430",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement431",{"className":"token","style":{"color":"#a04900"},"children":["try"]}],["$","span","code-segement432",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement433",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement434",{"className":"$undefined","style":{},"children":["            count "]}],["$","span","code-segement435",{"className":"token","style":{"color":"#a04900"},"children":["+="]}],["$","span","code-segement436",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement437",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement438",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement440",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement441",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement442",{"className":"$undefined","style":{},"children":[" i "]}],["$","span","code-segement443",{"className":"token","style":{"color":"#a04900"},"children":["%"]}],["$","span","code-segement444",{"className":"$undefined","style":{},"children":[" progress_update_interval "]}],["$","span","code-segement445",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement446",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement447",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement448",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement449",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement450",{"className":"$undefined","style":{},"children":["                time_elapsed "]}],["$","span","code-segement451",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement452",{"className":"$undefined","style":{},"children":[" time"]}],["$","span","code-segement453",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement454",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement455",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement456",{"className":"token","style":{"color":"#a04900"},"children":["-"]}],["$","span","code-segement457",{"className":"$undefined","style":{},"children":[" start_time\n"]}],["$","span","code-segement458",{"className":"$undefined","style":{},"children":["                progress_percentage "]}],["$","span","code-segement459",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement460",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement461",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement462",{"className":"$undefined","style":{},"children":["count "]}],["$","span","code-segement463",{"className":"token","style":{"color":"#a04900"},"children":["/"]}],["$","span","code-segement464",{"className":"$undefined","style":{},"children":[" task_length"]}],["$","span","code-segement465",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement466",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement467",{"className":"token","style":{"color":"#a04900"},"children":["*"]}],["$","span","code-segement468",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement469",{"className":"token","style":{"color":"#755f00"},"children":["100"]}],["$","span","code-segement470",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement471",{"className":"$undefined","style":{},"children":["                update_task_progress"]}],["$","span","code-segement472",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement473",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement474",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement475",{"className":"$undefined","style":{},"children":[" time_elapsed"]}],["$","span","code-segement476",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement477",{"className":"$undefined","style":{},"children":[" progress_percentage"]}],["$","span","code-segement478",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement479",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement480",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement481",{"className":"token","style":{"color":"#a04900"},"children":["except"]}],["$","span","code-segement482",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement483",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement484",{"className":"$undefined","style":{},"children":["            time_elapsed "]}],["$","span","code-segement485",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement486",{"className":"$undefined","style":{},"children":[" time"]}],["$","span","code-segement487",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement488",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement489",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement490",{"className":"token","style":{"color":"#a04900"},"children":["-"]}],["$","span","code-segement491",{"className":"$undefined","style":{},"children":[" start_time\n"]}],["$","span","code-segement492",{"className":"$undefined","style":{},"children":["            progress_percentage "]}],["$","span","code-segement493",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement494",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement495",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement496",{"className":"$undefined","style":{},"children":["count "]}],["$","span","code-segement497",{"className":"token","style":{"color":"#a04900"},"children":["/"]}],["$","span","code-segement498",{"className":"$undefined","style":{},"children":[" task_length"]}],["$","span","code-segement499",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement500",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement501",{"className":"token","style":{"color":"#a04900"},"children":["*"]}],["$","span","code-segement502",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement503",{"className":"token","style":{"color":"#755f00"},"children":["100"]}],["$","span","code-segement504",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement506",{"className":"$undefined","style":{},"children":["            mark_task_as_failed"]}],["$","span","code-segement507",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement508",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement509",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement510",{"className":"$undefined","style":{},"children":[" time_elapsed"]}],["$","span","code-segement511",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement512",{"className":"$undefined","style":{},"children":[" progress_percentage"]}],["$","span","code-segement513",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement514",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement516",{"className":"$undefined","style":{},"children":["    time_elapsed "]}],["$","span","code-segement517",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement518",{"className":"$undefined","style":{},"children":[" time"]}],["$","span","code-segement519",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement520",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement521",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement522",{"className":"token","style":{"color":"#a04900"},"children":["-"]}],["$","span","code-segement523",{"className":"$undefined","style":{},"children":[" start_time\n"]}],["$","span","code-segement524",{"className":"$undefined","style":{},"children":["    update_task_progress"]}],["$","span","code-segement525",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement526",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement527",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement528",{"className":"$undefined","style":{},"children":[" time_elapsed"]}],["$","span","code-segement529",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement530",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement531",{"className":"token","style":{"color":"#755f00"},"children":["100"]}],["$","span","code-segement532",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement533",{"className":"$undefined","style":{},"children":[" status"]}],["$","span","code-segement534",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement535",{"className":"token","style":{"color":"#116b00"},"children":["\"Completed\""]}],["$","span","code-segement536",{"className":"token","style":{"color":"#111b27"},"children":[")"]}]]]}]}]]}],["$","$Lc","13",{"id":"producer","variant":"h5","component":"h2","mb":2,"children":["$","strong",null,{"children":"Producer"}]}],["$","$Lc","14",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","To produce tasks for the Huey worker, we'll create a simple server with the following two endpoints:"]}],["$","$Lc","15",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) To add a task to the queue: randomly generates the task id, adds it to the queue, and returns it in a JSON response."]}],["$","$Lc","16",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","2) To get the status of a task: returns the status (progress, success, etc) of a task in a JSON response."]}],["$","$Lc","17",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","To make this work, we'll need two more files apart from the common files. The first one is ",["$","$La","17-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"utils.py"}]," which contains a simple utility function"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"from uuid import uuid4\nfrom time import time\n\n\ndef generate_task_id():\n    return str(uuid4()) + \"---\" + str(time())"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":[" uuid "]}],["$","span","code-segement2",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[" uuid4\n"]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement5",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":[" time "]}],["$","span","code-segement7",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement8",{"className":"$undefined","style":{},"children":[" time\n"]}],"\n","\n",["$","span","code-segement11",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement12",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement13",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement14",{"className":"token","style":{"color":"#7c00aa"},"children":["generate_task_id"]}],["$","span","code-segement15",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement16",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement17",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement18",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement19",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement20",{"className":"token","style":{"color":"#a04900"},"children":["return"]}],["$","span","code-segement21",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement22",{"className":"token","style":{"color":"#af00af"},"children":["str"]}],["$","span","code-segement23",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement24",{"className":"$undefined","style":{},"children":["uuid4"]}],["$","span","code-segement25",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement26",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement27",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement28",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement29",{"className":"token","style":{"color":"#a04900"},"children":["+"]}],["$","span","code-segement30",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement31",{"className":"token","style":{"color":"#116b00"},"children":["\"---\""]}],["$","span","code-segement32",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement33",{"className":"token","style":{"color":"#a04900"},"children":["+"]}],["$","span","code-segement34",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement35",{"className":"token","style":{"color":"#af00af"},"children":["str"]}],["$","span","code-segement36",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement37",{"className":"$undefined","style":{},"children":["time"]}],["$","span","code-segement38",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement39",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement40",{"className":"token","style":{"color":"#111b27"},"children":[")"]}]]]}]}]]}],["$","$Lc","19",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","The second file is ",["$","$La","19-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"app.py"}]," which defines our FastAPI server"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"$1a"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":[" os "]}],["$","span","code-segement2",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[" environ\n"]}],"\n",["$","span","code-segement5",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement6",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement7",{"className":"$undefined","style":{},"children":[" fastapi "]}],["$","span","code-segement8",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement9",{"className":"$undefined","style":{},"children":[" FastAPI\n"]}],["$","span","code-segement10",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement11",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement12",{"className":"$undefined","style":{},"children":[" fastapi"]}],["$","span","code-segement13",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement14",{"className":"$undefined","style":{},"children":["responses "]}],["$","span","code-segement15",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement16",{"className":"$undefined","style":{},"children":[" JSONResponse\n"]}],["$","span","code-segement17",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement18",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement19",{"className":"$undefined","style":{},"children":[" prometheus_client\n"]}],"\n",["$","span","code-segement21",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement22",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement23",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement24",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement25",{"className":"$undefined","style":{},"children":["tasks "]}],["$","span","code-segement26",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement27",{"className":"$undefined","style":{},"children":[" get_task_progress"]}],["$","span","code-segement28",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement29",{"className":"$undefined","style":{},"children":[" long_task"]}],["$","span","code-segement30",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement31",{"className":"$undefined","style":{},"children":[" update_task_progress"]}],["$","span","code-segement32",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement33",{"className":"$undefined","style":{},"children":[" validate_task_id\n"]}],["$","span","code-segement34",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement35",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement36",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement37",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement38",{"className":"$undefined","style":{},"children":["utils "]}],["$","span","code-segement39",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement40",{"className":"$undefined","style":{},"children":[" generate_task_id\n"]}],"\n",["$","span","code-segement42",{"className":"$undefined","style":{},"children":["METRICS_PORT "]}],["$","span","code-segement43",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement44",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement45",{"className":"token","style":{"color":"#af00af"},"children":["int"]}],["$","span","code-segement46",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement47",{"className":"$undefined","style":{},"children":["environ"]}],["$","span","code-segement48",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement49",{"className":"token","style":{"color":"#116b00"},"children":["\"METRICS_PORT\""]}],["$","span","code-segement50",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement51",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement52",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement53",{"className":"$undefined","style":{},"children":["prometheus_client"]}],["$","span","code-segement54",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement55",{"className":"$undefined","style":{},"children":["start_http_server"]}],["$","span","code-segement56",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement57",{"className":"$undefined","style":{},"children":["METRICS_PORT"]}],["$","span","code-segement58",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement59",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement61",{"className":"$undefined","style":{},"children":["app "]}],["$","span","code-segement62",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement63",{"className":"$undefined","style":{},"children":[" FastAPI"]}],["$","span","code-segement64",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement65",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement66",{"className":"$undefined","style":{},"children":["\n"]}],"\n","\n",["$","span","code-segement69",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement70",{"className":"token decorator annotation","style":{"color":"#111b27"},"children":["@app"]}],["$","span","code-segement71",{"className":"token decorator annotation","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement72",{"className":"token decorator annotation","style":{"color":"#111b27"},"children":["post"]}],["$","span","code-segement73",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement74",{"className":"token","style":{"color":"#116b00"},"children":["\"/api/tasks/add\""]}],["$","span","code-segement75",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement76",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement77",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement78",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement79",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement80",{"className":"token","style":{"color":"#7c00aa"},"children":["add_task"]}],["$","span","code-segement81",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement82",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement83",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement84",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement85",{"className":"$undefined","style":{},"children":["    new_task_id "]}],["$","span","code-segement86",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement87",{"className":"$undefined","style":{},"children":[" generate_task_id"]}],["$","span","code-segement88",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement89",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement90",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement91",{"className":"$undefined","style":{},"children":["    update_task_progress"]}],["$","span","code-segement92",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement93",{"className":"$undefined","style":{},"children":["new_task_id"]}],["$","span","code-segement94",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement95",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement96",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement97",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement98",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement99",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement100",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement101",{"className":"$undefined","style":{},"children":[" status"]}],["$","span","code-segement102",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement103",{"className":"token","style":{"color":"#116b00"},"children":["\"Queued\""]}],["$","span","code-segement104",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement105",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement107",{"className":"$undefined","style":{},"children":["    long_task"]}],["$","span","code-segement108",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement109",{"className":"$undefined","style":{},"children":["new_task_id"]}],["$","span","code-segement110",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement111",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement113",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement114",{"className":"token","style":{"color":"#a04900"},"children":["return"]}],["$","span","code-segement115",{"className":"$undefined","style":{},"children":[" JSONResponse"]}],["$","span","code-segement116",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement117",{"className":"$undefined","style":{},"children":["status_code"]}],["$","span","code-segement118",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement119",{"className":"token","style":{"color":"#755f00"},"children":["200"]}],["$","span","code-segement120",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement121",{"className":"$undefined","style":{},"children":[" content"]}],["$","span","code-segement122",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement123",{"className":"token","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement124",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement125",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement126",{"className":"token","style":{"color":"#116b00"},"children":["'success'"]}],["$","span","code-segement127",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement128",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement129",{"className":"token","style":{"color":"#755f00"},"children":["True"]}],["$","span","code-segement130",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement131",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement132",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement133",{"className":"token","style":{"color":"#116b00"},"children":["'result'"]}],["$","span","code-segement134",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement135",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement136",{"className":"token","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement137",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement138",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement139",{"className":"token","style":{"color":"#116b00"},"children":["\"id\""]}],["$","span","code-segement140",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement141",{"className":"$undefined","style":{},"children":[" new_task_id"]}],["$","span","code-segement142",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement143",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement144",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement145",{"className":"token","style":{"color":"#116b00"},"children":["'message'"]}],["$","span","code-segement146",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement147",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement148",{"className":"token","style":{"color":"#116b00"},"children":["\"Task queued.\""]}],["$","span","code-segement149",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement150",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement151",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement152",{"className":"token","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement153",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement154",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement155",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement156",{"className":"token","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement157",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement158",{"className":"$undefined","style":{},"children":["\n"]}],"\n","\n",["$","span","code-segement161",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement162",{"className":"token decorator annotation","style":{"color":"#111b27"},"children":["@app"]}],["$","span","code-segement163",{"className":"token decorator annotation","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement164",{"className":"token decorator annotation","style":{"color":"#111b27"},"children":["get"]}],["$","span","code-segement165",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement166",{"className":"token","style":{"color":"#116b00"},"children":["\"/api/tasks/status/{task_id}\""]}],["$","span","code-segement167",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement168",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement169",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement170",{"className":"token","style":{"color":"#a04900"},"children":["async"]}],["$","span","code-segement171",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement172",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement173",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement174",{"className":"token","style":{"color":"#7c00aa"},"children":["get_task_status"]}],["$","span","code-segement175",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement176",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement177",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement178",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement179",{"className":"token","style":{"color":"#af00af"},"children":["str"]}],["$","span","code-segement180",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement181",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement182",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement183",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement184",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement185",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement186",{"className":"token","style":{"color":"#a04900"},"children":["not"]}],["$","span","code-segement187",{"className":"$undefined","style":{},"children":[" validate_task_id"]}],["$","span","code-segement188",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement189",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement190",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement191",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement192",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement193",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement194",{"className":"token","style":{"color":"#a04900"},"children":["return"]}],["$","span","code-segement195",{"className":"$undefined","style":{},"children":[" JSONResponse"]}],["$","span","code-segement196",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement197",{"className":"$undefined","style":{},"children":["status_code"]}],["$","span","code-segement198",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement199",{"className":"token","style":{"color":"#755f00"},"children":["404"]}],["$","span","code-segement200",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement201",{"className":"$undefined","style":{},"children":[" content"]}],["$","span","code-segement202",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement203",{"className":"token","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement204",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement205",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement206",{"className":"token","style":{"color":"#116b00"},"children":["'success'"]}],["$","span","code-segement207",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement208",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement209",{"className":"token","style":{"color":"#755f00"},"children":["False"]}],["$","span","code-segement210",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement211",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement212",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement213",{"className":"token","style":{"color":"#116b00"},"children":["'error'"]}],["$","span","code-segement214",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement215",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement216",{"className":"token","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement217",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement218",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement219",{"className":"token","style":{"color":"#116b00"},"children":["'message'"]}],["$","span","code-segement220",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement221",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement222",{"className":"token","style":{"color":"#116b00"},"children":["\"Task not found.\""]}],["$","span","code-segement223",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement224",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement225",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement226",{"className":"token","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement227",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement228",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement229",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement230",{"className":"token","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement231",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement232",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement234",{"className":"$undefined","style":{},"children":["    task_progress "]}],["$","span","code-segement235",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement236",{"className":"$undefined","style":{},"children":[" get_task_progress"]}],["$","span","code-segement237",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement238",{"className":"$undefined","style":{},"children":["task_id"]}],["$","span","code-segement239",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement240",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement242",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement243",{"className":"token","style":{"color":"#a04900"},"children":["return"]}],["$","span","code-segement244",{"className":"$undefined","style":{},"children":[" JSONResponse"]}],["$","span","code-segement245",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement246",{"className":"$undefined","style":{},"children":["status_code"]}],["$","span","code-segement247",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement248",{"className":"token","style":{"color":"#755f00"},"children":["200"]}],["$","span","code-segement249",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement250",{"className":"$undefined","style":{},"children":[" content"]}],["$","span","code-segement251",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement252",{"className":"token","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement253",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement254",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement255",{"className":"token","style":{"color":"#116b00"},"children":["'success'"]}],["$","span","code-segement256",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement257",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement258",{"className":"token","style":{"color":"#755f00"},"children":["True"]}],["$","span","code-segement259",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement260",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement261",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement262",{"className":"token","style":{"color":"#116b00"},"children":["'result'"]}],["$","span","code-segement263",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement264",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement265",{"className":"token","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement266",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement267",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement268",{"className":"token","style":{"color":"#116b00"},"children":["'progress'"]}],["$","span","code-segement269",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement270",{"className":"$undefined","style":{},"children":[" task_progress"]}],["$","span","code-segement271",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement272",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement273",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement274",{"className":"token","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement275",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement276",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement277",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement278",{"className":"token","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement279",{"className":"token","style":{"color":"#111b27"},"children":[")"]}]]]}]}]]}],["$","$Lc","21",{"id":"consumer","variant":"h5","component":"h2","mb":2,"children":["$","strong",null,{"children":"Consumer"}]}],["$","$Lc","22",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","The consumer has no other files except the two common files. In a virtual environment, install the dependencies for it"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"pip install redis huey"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["pip "]}],["$","span","code-segement1",{"className":"token","style":{"color":"#7c00aa"},"children":["install"]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":[" redis huey"]}]]]}]}]]}],["$","$Lc","24",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","To run the consumer, we can run the following command:"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"huey_consumer.py tasks.huey"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["huey_consumer.py tasks.huey"]}]]]}]}]]}],["$","$Lc","26",{"id":"method-1:-two-directories-with-duplicate-files","variant":"h4","component":"h1","mb":2,"children":["$","strong",null,{"children":"Method 1: Two Directories with Duplicate Files"}]}],["$","$Lc","27",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","The first method is the most straightforward: we have two separate folders for the two applications and the common files are stored duplicated in both those folders."]}],["$","$Lc","28",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Here's the directory structure:"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"consumer\n       .dockerignore\n       Dockerfile\n       docker_build.sh\n       redis_client.py\n       tasks.py\n\nproducer\n        .dockerignore\n        app.py\n        Dockerfile\n        docker_build.sh\n        redis_client.py\n        tasks.py\n        utils.py"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["consumer\n"]}],"       .dockerignore\n","       Dockerfile\n","       docker_build.sh\n","       redis_client.py\n","       tasks.py\n","\n","producer\n","        .dockerignore\n","        app.py\n","        Dockerfile\n","        docker_build.sh\n","        redis_client.py\n","        tasks.py\n","        utils.py"]]}]}]]}],["$","$Lc","30",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","But, there's an obvious problem here: we have to manage the files in two places, and we'll have duplicated files in our version control. A workaround would be to only update these files in the ",["$","$La","30-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"consumer"}]," and modify ",["$","$La","30-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"producer/docker_build.sh"}]," to copy the latest files from the consumer folder before building the Docker image. We'll also need to add a ",["$","$La","30-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"run.sh"}]," script that performs this copy when we have to run the server in development."]}],["$","$Lc","31",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","But, if we are copying files, why not just move all the common files into a separate directory?"]}],["$","$Lc","32",{"id":"method-2:-`common`-directory-with-the-common-files","variant":"h4","component":"h1","mb":2,"children":["$","strong",null,{"children":"Method 2: `Common` Directory with the common files"}]}],["$","$Lc","33",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Let's create a new directory called ",["$","$La","33-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"common"}]," on the same level as the ",["$","$La","33-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"producer"}]," and ",["$","$La","33-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"consumer"}]," directories and move the ",["$","$La","33-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"redis_client.py"}]," and ",["$","$La","33-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"tasks.py"}]," files into this directory. Now, we should have the following directory structure:"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"common\n       redis_client.py\n       tasks.py\n\nconsumer\n       .dockerignore\n       Dockerfile\n       docker_build.sh\n       run.sh\n\nproducer\n        .dockerignore\n        app.py\n        Dockerfile\n        docker_build.sh\n        run.sh\n        utils.py"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["common\n"]}],"       redis_client.py\n","       tasks.py\n","\n","consumer\n","       .dockerignore\n","       Dockerfile\n","       docker_build.sh\n","       run.sh\n","\n","producer\n","        .dockerignore\n","        app.py\n","        Dockerfile\n","        docker_build.sh\n","        run.sh\n","        utils.py"]]}]}]]}],["$","$Lc","35",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Let's take a look at ",["$","$La","35-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"producer/docker_build.sh"}],""]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"cp -r ../common/* .\n\ndocker build -t your-docker-hub-username/task-producer .\n\nrm redis_client.py\nrm tasks.py"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"#7c00aa"},"children":["cp"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":[" -r "]}],["$","span","code-segement2",{"className":"token","style":{"color":"#111b27"},"children":[".."]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":["/common/* "]}],["$","span","code-segement4",{"className":"token","style":{"color":"#005a8e"},"children":["."]}],["$","span","code-segement5",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement7",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement8",{"className":"token","style":{"color":"#7c00aa"},"children":["docker"]}],["$","span","code-segement9",{"className":"$undefined","style":{},"children":[" build -t your-docker-hub-username/task-producer "]}],["$","span","code-segement10",{"className":"token","style":{"color":"#005a8e"},"children":["."]}],["$","span","code-segement11",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement13",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement14",{"className":"token","style":{"color":"#7c00aa"},"children":["rm"]}],["$","span","code-segement15",{"className":"$undefined","style":{},"children":[" redis_client.py\n"]}],["$","span","code-segement16",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement17",{"className":"token","style":{"color":"#7c00aa"},"children":["rm"]}],["$","span","code-segement18",{"className":"$undefined","style":{},"children":[" tasks.py"]}]]]}]}]]}],["$","$Lc","37",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","In this configuration, my IDE's IntelliSense does not work for the functions imported from the ",["$","$La","37-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"common"}]," files."]}],["$","$Lc","38",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Another obvious problem is that for each common file, I need to add an ",["$","$La","38-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"rm"}]," statement. It is possible to move the entire ",["$","$La","38-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"common"}]," folder into ",["$","$La","38-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"producer/common"}],", but that would require us to make changes to the ",["$","$La","38-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"app.py"}]," file."]}],["$","$Lc","39",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","A possible solution is to move the ",["$","$La","39-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"common"}]," files into the ",["$","$La","39-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"producer"}]," folder and let them stay there. We'll change their permissions so that they cannot be edited by the IDE. But, once again, this means that if we make some changes to a file in the ",["$","$La","39-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"common"}]," folder, those changes will not be reflected in our IDE's IntelliSense."]}],["$","$Lc","40",{"id":"method-3:-a-single-directory","variant":"h4","component":"h1","mb":2,"children":["$","strong",null,{"children":"Method 3: A single Directory"}]}],["$","$Lc","41",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","For our current requirement i.e. the producer and consumer applications, I find this method the most suitable: we have a single directory with code for both the applications along with:"]}],["$","$Lc","42",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Two ",["$","$La","42-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"run"}]," scripts: ",["$","$La","42-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"run_producer.sh"}]," and ",["$","$La","42-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"run_consumer.sh"}],"."]}],["$","$Lc","43",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Two ",["$","$La","43-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"docker_build"}]," scripts: ",["$","$La","43-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"docker_build_producer.sh"}]," and ",["$","$La","43-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"docker_build_consumer.sh"}],"."]}],["$","$Lc","44",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Two Dockerfiles: ",["$","$La","44-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"Dockerfile.producer"}]," and ",["$","$La","44-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"Dockerfile.consumer"}],"."]}],["$","$Lc","45",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Two dockerignores: ",["$","$La","45-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":".dockerignore.producer"}]," and ",["$","$La","45-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":".dockerignore.consumer"}],"."]}],["$","$Lc","46",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Here is the directory structure:"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"   .dockerignore.consumer\n   .dockerignore.producer\n   Dockerfile.consumer\n   Dockerfile.producer\n   docker_build_consumer.sh\n   docker_build_producer.sh\n   run_consumer.sh\n   run_producer.sh\n\nsrc\n        app.py\n        redis_client.py\n        tasks.py\n        utils.py"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["   .dockerignore.consumer\n"]}],"   .dockerignore.producer\n","   Dockerfile.consumer\n","   Dockerfile.producer\n","   docker_build_consumer.sh\n","   docker_build_producer.sh\n","   run_consumer.sh\n","   run_producer.sh\n","\n","src\n","        app.py\n","        redis_client.py\n","        tasks.py\n","        utils.py"]]}]}]]}],["$","$Lc","48",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","The ",["$","$La","48-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"run"}]," scripts are pretty simple, here's ",["$","$La","48-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"run_producer.sh"}],""]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"uvicorn src.app:app --port=8000 --host=0.0.0.0"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["uvicorn src.app:app --port"]}],["$","span","code-segement1",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement2",{"className":"token","style":{"color":"#755f00"},"children":["8000"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[" --host"]}],["$","span","code-segement4",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement5",{"className":"token","style":{"color":"#755f00"},"children":["0.0"]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":[".0.0"]}]]]}]}]]}],["$","$Lc","50",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","The ",["$","$La","50-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"docker_build"}]," scripts, on the other hand, are a little more convoluted. We have to perform two operations here:"]}],["$","$Lc","51",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Currently, the ",["$","$La","51-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"docker build"}]," command does not support passing a custom ",["$","$La","51-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"dockerignore"}]," file and defaults to the file in the current directory named ",["$","$La","51-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":".dockerignore"}],". So, while building the producer, we copy ",["$","$La","51-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":".dockerignore.producer"}]," to ",["$","$La","51-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":".dockerignore"}],", and delete the ",["$","$La","51-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":".dockerignore"}]," once the build is completed."]}],["$","$Lc","52",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","2) The second thing we have to take care of is passing the right Dockerfile to the ",["$","$La","52-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"docker build"}]," command. Fortunately, the ",["$","$La","52-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"docker build"}]," command does accept a customer Dockerfile using the ",["$","$La","52-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"-f"}]," argument."]}],["$","$Lc","53",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","The ",["$","$La","53-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"docker_build_producer.sh"}]," script should look something like the following"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"#!/bin/bash\n\ncp .dockerignore.producer .dockerignore\n\ndocker build -f Dockerfile.producer -t your-docker-hub-username/task-producer .\n\nrm .dockerignore"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token shebang","style":{"color":"#c22f2e","fontWeight":"bold"},"children":["#!/bin/bash"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement3",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement4",{"className":"token","style":{"color":"#7c00aa"},"children":["cp"]}],["$","span","code-segement5",{"className":"$undefined","style":{},"children":[" .dockerignore.producer .dockerignore\n"]}],"\n",["$","span","code-segement7",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement8",{"className":"token","style":{"color":"#7c00aa"},"children":["docker"]}],["$","span","code-segement9",{"className":"$undefined","style":{},"children":[" build -f Dockerfile.producer -t your-docker-hub-username/task-producer "]}],["$","span","code-segement10",{"className":"token","style":{"color":"#005a8e"},"children":["."]}],["$","span","code-segement11",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement13",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement14",{"className":"token","style":{"color":"#7c00aa"},"children":["rm"]}],["$","span","code-segement15",{"className":"$undefined","style":{},"children":[" .dockerignore"]}]]]}]}]]}],["$","$Lc","55",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","This method allows us to use our IDE's IntelliSense and prevent duplicate files in version control but at the cost of having two of building and development-related files. If we had a large number of applications, this could quickly turn into a mess."]}],["$","$Lc","56",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","A solution would be to use a simple bash script that allows us to run/build the producer/consumer. Create a new file called ",["$","$La","56-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"manager.sh"}]," in the project's root directory."]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"if [ $# -lt 2 ]; then\n    echo \"Usage: $0 <command> <target>\"\n    exit 1\nfi\n\nCOMMAND=$1\nTARGET=$2\n\nvalid_targets=(\"producer\" \"consumer\")\n\n\nrun_target() {\n    local target_app=\"$1\"\n\n    if [ \"$target_app\" == \"producer\" ]; then\n        uvicorn src.app:app --port=8000 --host=0.0.0.0\n    elif [ \"$target_app\" == \"consumer\" ]; then\n        huey_consumer.py src.tasks.huey\n    fi\n}\n\nbuild_target() {\n    local target_app=\"$1\"\n    local target_docker_dir=\"docker/$target_app\"\n\n    cp -r $target_docker_dir/. .\n\n    docker build -t your-docker-hub-username/task-$target_app .\n\n    rm Dockerfile\n    rm .dockerignore\n}\n\nif [ \"$TARGET\" != \"producer\" ] && [ \"$TARGET\" != \"consumer\" ]; then\n    echo \"Invalid target. Valid targets are: 'producer' and 'consumer'.\"\n    exit 1\nfi\n\nif [ \"$COMMAND\" == \"run\" ]; then\n    run_target $TARGET\nelif [ \"$COMMAND\" == \"build\" ]; then\n    build_target $TARGET\nelse\n    echo \"Invalid command specified. Valid targets are: 'run' and 'build'.\"\n    exit 1\nfi"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement2",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement4",{"className":"token","style":{"color":"#005a8e"},"children":["$$#"]}],["$","span","code-segement5",{"className":"$undefined","style":{},"children":[" -lt "]}],["$","span","code-segement6",{"className":"token","style":{"color":"#755f00"},"children":["2"]}],["$","span","code-segement7",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement8",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement9",{"className":"token","style":{"color":"#111b27"},"children":[";"]}],["$","span","code-segement10",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement11",{"className":"token","style":{"color":"#a04900"},"children":["then"]}],["$","span","code-segement12",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement13",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement14",{"className":"token","style":{"color":"#005a8e"},"children":["echo"]}],["$","span","code-segement15",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement16",{"className":"token","style":{"color":"#116b00"},"children":["\"Usage: "]}],["$","span","code-segement17",{"className":"token","style":{"color":"#005a8e"},"children":["$$0"]}],["$","span","code-segement18",{"className":"token","style":{"color":"#116b00"},"children":[" <command> <target>\""]}],["$","span","code-segement19",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement20",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement21",{"className":"token","style":{"color":"#005a8e"},"children":["exit"]}],["$","span","code-segement22",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement23",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement24",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement25",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement26",{"className":"token","style":{"color":"#a04900"},"children":["fi"]}],["$","span","code-segement27",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement29",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement30",{"className":"token assign-left","style":{"color":"#005a8e"},"children":["COMMAND"]}],["$","span","code-segement31",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement32",{"className":"token","style":{"color":"#005a8e"},"children":["$$1"]}],["$","span","code-segement33",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement34",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement35",{"className":"token assign-left","style":{"color":"#005a8e"},"children":["TARGET"]}],["$","span","code-segement36",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement37",{"className":"token","style":{"color":"#005a8e"},"children":["$$2"]}],["$","span","code-segement38",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement40",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement41",{"className":"token assign-left","style":{"color":"#005a8e"},"children":["valid_targets"]}],["$","span","code-segement42",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement43",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement44",{"className":"token","style":{"color":"#116b00"},"children":["\"producer\""]}],["$","span","code-segement45",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement46",{"className":"token","style":{"color":"#116b00"},"children":["\"consumer\""]}],["$","span","code-segement47",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement48",{"className":"$undefined","style":{},"children":["\n"]}],"\n","\n",["$","span","code-segement51",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement52",{"className":"token function-name","style":{"color":"#7c00aa"},"children":["run_target"]}],["$","span","code-segement53",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement54",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement55",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement56",{"className":"token","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement57",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement58",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement59",{"className":"token","style":{"color":"#005a8e"},"children":["local"]}],["$","span","code-segement60",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement61",{"className":"token assign-left","style":{"color":"#005a8e"},"children":["target_app"]}],["$","span","code-segement62",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement63",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement64",{"className":"token","style":{"color":"#005a8e"},"children":["$$1"]}],["$","span","code-segement65",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement66",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement68",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement69",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement70",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement71",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement72",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement73",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement74",{"className":"token","style":{"color":"#005a8e"},"children":["$$target_app"]}],["$","span","code-segement75",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement76",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement77",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement78",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement79",{"className":"token","style":{"color":"#116b00"},"children":["\"producer\""]}],["$","span","code-segement80",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement81",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement82",{"className":"token","style":{"color":"#111b27"},"children":[";"]}],["$","span","code-segement83",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement84",{"className":"token","style":{"color":"#a04900"},"children":["then"]}],["$","span","code-segement85",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement86",{"className":"$undefined","style":{},"children":["        uvicorn src.app:app --port"]}],["$","span","code-segement87",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement88",{"className":"token","style":{"color":"#755f00"},"children":["8000"]}],["$","span","code-segement89",{"className":"$undefined","style":{},"children":[" --host"]}],["$","span","code-segement90",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement91",{"className":"token","style":{"color":"#755f00"},"children":["0.0"]}],["$","span","code-segement92",{"className":"$undefined","style":{},"children":[".0.0\n"]}],["$","span","code-segement93",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement94",{"className":"token","style":{"color":"#a04900"},"children":["elif"]}],["$","span","code-segement95",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement96",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement97",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement98",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement99",{"className":"token","style":{"color":"#005a8e"},"children":["$$target_app"]}],["$","span","code-segement100",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement101",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement102",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement103",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement104",{"className":"token","style":{"color":"#116b00"},"children":["\"consumer\""]}],["$","span","code-segement105",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement106",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement107",{"className":"token","style":{"color":"#111b27"},"children":[";"]}],["$","span","code-segement108",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement109",{"className":"token","style":{"color":"#a04900"},"children":["then"]}],["$","span","code-segement110",{"className":"$undefined","style":{},"children":["\n"]}],"        huey_consumer.py src.tasks.huey\n",["$","span","code-segement112",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement113",{"className":"token","style":{"color":"#a04900"},"children":["fi"]}],["$","span","code-segement114",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement115",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement116",{"className":"token","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement117",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement119",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement120",{"className":"token function-name","style":{"color":"#7c00aa"},"children":["build_target"]}],["$","span","code-segement121",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement122",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement123",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement124",{"className":"token","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement125",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement126",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement127",{"className":"token","style":{"color":"#005a8e"},"children":["local"]}],["$","span","code-segement128",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement129",{"className":"token assign-left","style":{"color":"#005a8e"},"children":["target_app"]}],["$","span","code-segement130",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement131",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement132",{"className":"token","style":{"color":"#005a8e"},"children":["$$1"]}],["$","span","code-segement133",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement134",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement135",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement136",{"className":"token","style":{"color":"#005a8e"},"children":["local"]}],["$","span","code-segement137",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement138",{"className":"token assign-left","style":{"color":"#005a8e"},"children":["target_docker_dir"]}],["$","span","code-segement139",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement140",{"className":"token","style":{"color":"#116b00"},"children":["\"docker/"]}],["$","span","code-segement141",{"className":"token","style":{"color":"#005a8e"},"children":["$$target_app"]}],["$","span","code-segement142",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement143",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement145",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement146",{"className":"token","style":{"color":"#7c00aa"},"children":["cp"]}],["$","span","code-segement147",{"className":"$undefined","style":{},"children":[" -r "]}],["$","span","code-segement148",{"className":"token","style":{"color":"#005a8e"},"children":["$$target_docker_dir"]}],["$","span","code-segement149",{"className":"$undefined","style":{},"children":["/. "]}],["$","span","code-segement150",{"className":"token","style":{"color":"#005a8e"},"children":["."]}],["$","span","code-segement151",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement153",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement154",{"className":"token","style":{"color":"#7c00aa"},"children":["docker"]}],["$","span","code-segement155",{"className":"$undefined","style":{},"children":[" build -t your-docker-hub-username/task-"]}],["$","span","code-segement156",{"className":"token","style":{"color":"#005a8e"},"children":["$$target_app"]}],["$","span","code-segement157",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement158",{"className":"token","style":{"color":"#005a8e"},"children":["."]}],["$","span","code-segement159",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement161",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement162",{"className":"token","style":{"color":"#7c00aa"},"children":["rm"]}],["$","span","code-segement163",{"className":"$undefined","style":{},"children":[" Dockerfile\n"]}],["$","span","code-segement164",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement165",{"className":"token","style":{"color":"#7c00aa"},"children":["rm"]}],["$","span","code-segement166",{"className":"$undefined","style":{},"children":[" .dockerignore\n"]}],["$","span","code-segement167",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement168",{"className":"token","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement169",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement171",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement172",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement173",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement174",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement175",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement176",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement177",{"className":"token","style":{"color":"#005a8e"},"children":["$$TARGET"]}],["$","span","code-segement178",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement179",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement180",{"className":"token","style":{"color":"#a04900"},"children":["!="]}],["$","span","code-segement181",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement182",{"className":"token","style":{"color":"#116b00"},"children":["\"producer\""]}],["$","span","code-segement183",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement184",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement185",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement186",{"className":"token","style":{"color":"#a04900"},"children":["&&"]}],["$","span","code-segement187",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement188",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement189",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement190",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement191",{"className":"token","style":{"color":"#005a8e"},"children":["$$TARGET"]}],["$","span","code-segement192",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement193",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement194",{"className":"token","style":{"color":"#a04900"},"children":["!="]}],["$","span","code-segement195",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement196",{"className":"token","style":{"color":"#116b00"},"children":["\"consumer\""]}],["$","span","code-segement197",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement198",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement199",{"className":"token","style":{"color":"#111b27"},"children":[";"]}],["$","span","code-segement200",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement201",{"className":"token","style":{"color":"#a04900"},"children":["then"]}],["$","span","code-segement202",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement203",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement204",{"className":"token","style":{"color":"#005a8e"},"children":["echo"]}],["$","span","code-segement205",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement206",{"className":"token","style":{"color":"#116b00"},"children":["\"Invalid target. Valid targets are: 'producer' and 'consumer'.\""]}],["$","span","code-segement207",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement208",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement209",{"className":"token","style":{"color":"#005a8e"},"children":["exit"]}],["$","span","code-segement210",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement211",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement212",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement213",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement214",{"className":"token","style":{"color":"#a04900"},"children":["fi"]}],["$","span","code-segement215",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement217",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement218",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement219",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement220",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement221",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement222",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement223",{"className":"token","style":{"color":"#005a8e"},"children":["$$COMMAND"]}],["$","span","code-segement224",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement225",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement226",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement227",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement228",{"className":"token","style":{"color":"#116b00"},"children":["\"run\""]}],["$","span","code-segement229",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement230",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement231",{"className":"token","style":{"color":"#111b27"},"children":[";"]}],["$","span","code-segement232",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement233",{"className":"token","style":{"color":"#a04900"},"children":["then"]}],["$","span","code-segement234",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement235",{"className":"$undefined","style":{},"children":["    run_target "]}],["$","span","code-segement236",{"className":"token","style":{"color":"#005a8e"},"children":["$$TARGET"]}],["$","span","code-segement237",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement238",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement239",{"className":"token","style":{"color":"#a04900"},"children":["elif"]}],["$","span","code-segement240",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement241",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement242",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement243",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement244",{"className":"token","style":{"color":"#005a8e"},"children":["$$COMMAND"]}],["$","span","code-segement245",{"className":"token","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement246",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement247",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement248",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement249",{"className":"token","style":{"color":"#116b00"},"children":["\"build\""]}],["$","span","code-segement250",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement251",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement252",{"className":"token","style":{"color":"#111b27"},"children":[";"]}],["$","span","code-segement253",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement254",{"className":"token","style":{"color":"#a04900"},"children":["then"]}],["$","span","code-segement255",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement256",{"className":"$undefined","style":{},"children":["    build_target "]}],["$","span","code-segement257",{"className":"token","style":{"color":"#005a8e"},"children":["$$TARGET"]}],["$","span","code-segement258",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement259",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement260",{"className":"token","style":{"color":"#a04900"},"children":["else"]}],["$","span","code-segement261",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement262",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement263",{"className":"token","style":{"color":"#005a8e"},"children":["echo"]}],["$","span","code-segement264",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement265",{"className":"token","style":{"color":"#116b00"},"children":["\"Invalid command specified. Valid targets are: 'run' and 'build'.\""]}],["$","span","code-segement266",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement267",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement268",{"className":"token","style":{"color":"#005a8e"},"children":["exit"]}],["$","span","code-segement269",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement270",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement271",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement272",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement273",{"className":"token","style":{"color":"#a04900"},"children":["fi"]}]]]}]}]]}],["$","$Lc","58",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","The script accepts two commands - ",["$","$La","58-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"run"}]," or ",["$","$La","58-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"build"}],", and one of two targets - ",["$","$La","58-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"producer"}]," or ",["$","$La","58-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"consumer"}],"."]}],["$","$Lc","59",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","The directory structure would now look like the following"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"   manager.sh\n\ndocker\n   consumer\n          .dockerignore\n          Dockerfile\n   \n   producer\n           .dockerignore\n           Dockerfile\n\nsrc\n        app.py\n        redis_client.py\n        tasks.py\n        utils.py"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["   manager.sh\n"]}],"\n","docker\n","   consumer\n","          .dockerignore\n","          Dockerfile\n","   \n","   producer\n","           .dockerignore\n","           Dockerfile\n","\n","src\n","        app.py\n","        redis_client.py\n","        tasks.py\n","        utils.py"]]}]}]]}],["$","$Lc","61",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","In this way, we can manage multiple applications without having an overwhelming amount of files."]}],["$","$Lc","62",{"id":"conclusion","variant":"h4","component":"h1","mb":2,"children":["$","strong",null,{"children":"Conclusion"}]}],["$","$Lc","63",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","We've gone over three methods of structuring our code so that we can build multiple applications out of the same code base. Which method is the best? Well, as with most things in software engineering, it depends on your use case."]}],["$","$Lc","64",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","See you next time :)"]}]]}]}]]}]}],"$L1b"]}]
1c:I[3713,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
12:["$","$La",null,{"sx":{"width":"100%","display":"flex","flexDirection":"row","justifyContent":"space-between","alignItems":"center"},"children":[["$","$Lc",null,{"variant":"p","component":"p","mr":2,"children":"By: Abhilaksh Singh Reen"}],["$","$L1c",null,{"socialMediaProfiles":[{"network_name":"LinkedIn","profile_url":"https://www.linkedin.com/in/abhilaksh-singh-837901210/","profile_display_name":"Abhilaksh Singh Reen"},{"network_name":"Twitter","profile_url":"https://x.com/TheVeteran06","profile_display_name":"The Veteran 06"},{"network_name":"GitHub","profile_url":"https://github.com/AbhilakshSinghReen","profile_display_name":"Abhilaksh Singh Reen"}]}]]}]
1d:I[6652,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
1e:I[6981,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
1f:I[2818,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
1b:["$","$La",null,{"mt":5,"mb":5,"pb":2,"sx":{"width":"100%","display":"flex","flexDirection":"column","justifyContent":"flex-start","alignItems":"center"},"children":["$","$L11",null,{"container":true,"spacing":2,"mt":4,"mb":4,"children":[["$","$L11","/dev-ops/diy-weighted-load-balancing-python",{"item":true,"xs":12,"sm":6,"md":4,"lg":3,"children":["$","$Ld",null,{"href":"/dev-ops/diy-weighted-load-balancing-python","passHref":true,"style":{"textDecoration":"none"},"children":["$","$L1d",null,{"sx":{"width":"100%","height":"100%","boxShadow":"1px 1px 1px 1px \"#eeeeee\"","&:hover":{"boxShadow":"3px 3px 3px 3px \"#eeeeee\"","cursor":"pointer"}},"children":[["$","$L1e",null,{"component":"img","height":"150","image":"/media/images/diy-weighted-load-balancing-python-thumbnail.jpg","alt":"DIY Weighted Load Balancing in Python","sx":{"objectFit":"cover"}}],["$","$L1f",null,{"children":[["$","$Lc",null,{"gutterBottom":true,"variant":"h6","component":"h2","children":[""," ","DIY Weighted Load Balancing in Python"]}],["$","$Lc",null,{"gutterBottom":true,"variant":"p","component":"p","sx":{"overflow":"hidden","textOverflow":"ellipsis","display":"-webkit-box","WebkitLineClamp":"3","WebkitBoxOrient":"vertical"},"children":"Set up a single-node Kubernetes Cluster (minikube) as well as other tools (Kubectl, Helm, KEDA, etc.) on your local machine."}],["$","$La",null,{"sx":{"width":"100%","display":"flex","flexDirection":"row","justifyContent":"flex-end","alignItems":"center"},"children":["$","$Lc",null,{"gutterBottom":true,"variant":"p","component":"p","children":"04m Read"}]}],false]}]]}]}]}]]}]}]
