3:I[9275,[],""]
6:I[1343,[],""]
7:I[6871,["98","static/chunks/98-98337b3bb708bd24.js","748","static/chunks/748-1f14ee6eb3d7029a.js","271","static/chunks/271-37a22bace913f735.js","185","static/chunks/app/layout-08611f287dda1230.js"],"default"]
8:I[5877,["98","static/chunks/98-98337b3bb708bd24.js","748","static/chunks/748-1f14ee6eb3d7029a.js","271","static/chunks/271-37a22bace913f735.js","185","static/chunks/app/layout-08611f287dda1230.js"],"default"]
9:I[902,["98","static/chunks/98-98337b3bb708bd24.js","748","static/chunks/748-1f14ee6eb3d7029a.js","271","static/chunks/271-37a22bace913f735.js","185","static/chunks/app/layout-08611f287dda1230.js"],""]
a:I[5218,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
b:I[2324,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
c:I[2591,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
d:I[231,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
e:I[3180,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
f:I[3245,["98","static/chunks/98-98337b3bb708bd24.js","748","static/chunks/748-1f14ee6eb3d7029a.js","271","static/chunks/271-37a22bace913f735.js","185","static/chunks/app/layout-08611f287dda1230.js"],"default"]
4:["categorySlug","dev-ops","d"]
5:["postOrSeriesSlug","diy-weighted-load-balancing-python","d"]
0:["ohMaUTLwFrGKVxbTz971Y",[[["",{"children":[["categorySlug","dev-ops","d"],{"children":[["postOrSeriesSlug","diy-weighted-load-balancing-python","d"],{"children":["__PAGE__?{\"categorySlug\":\"dev-ops\",\"postOrSeriesSlug\":\"diy-weighted-load-balancing-python\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":[["categorySlug","dev-ops","d"],{"children":[["postOrSeriesSlug","diy-weighted-load-balancing-python","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children","$5","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__className_d65c78","children":["$","$L7",null,{"children":[["$","$L8",null,{}],["$","$L9",null,{"maxWidth":"lg","children":[["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","$La",null,{"children":[["$","$Lb",null,{"render":false,"targetSiteNavigationState":[],"targetPageNavigationState":[]}],["$","$Lc",null,{"variant":"h4","children":["$","strong",null,{"children":"Not Found"}]}],["$","$Lc",null,{"variant":"h6","mb":3,"children":"Oops! It looks like the page you're looking for does not exist."}],["$","$Ld",null,{"href":"/","children":["$","$Le",null,{"variant":"contained","sx":{"marginRight":5,"marginBottom":1},"children":"Take me Home"}]}]]}],"notFoundStyles":[],"styles":null}],["$","$Lf",null,{}]]}]]}]}]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/1d4d01086947be98.css","precedence":"next","crossOrigin":"$undefined"}]],"$L10"]]]]
10:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","link","2",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
1:null
11:I[3507,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
13:I[4204,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
14:I[1847,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
15:I[8125,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
16:I[3578,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
17:I[7005,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],""]
18:I[6480,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
19:T5f2,from random import uniform

from server import Server


class LoadBalancer:
    "Weighted Round-Robin Load Balancer"

    def __init__(self, servers: list[Server]) -> None:
        self.all_servers = servers
        self.server_weights_sum = sum([server.weight for server in servers])
        self.probability_ranges = self.compute_probability_ranges(servers)

    def compute_probability_ranges(self, servers):
        probability_ranges = []

        last_range_end = 0
        for server in servers:
            probability_ranges.append({
                "serverId": server.id,
                "rangeStart": last_range_end,
                "rangeEnd": last_range_end + server.weight,
            })

            last_range_end += server.weight

        return probability_ranges

    def get_target_server(self):
        range_specifier = uniform(0, self.server_weights_sum)

        target_server_id = ""
        for prob_range in self.probability_ranges:
            if range_specifier >= prob_range["rangeStart"] and range_specifier < prob_range["rangeEnd"]:
                target_server_id = prob_range["serverId"]
                break
        if target_server_id == "":
            target_server_id = self.probability_ranges[-1]["serverId"]

        for server in self.all_servers:
            if server.id == target_server_id:
                return server

        return False

    def make_request(self, request):
        target_server = self.get_target_server()

        target_server.make_request(request)1a:T415,from random import randint
import unittest

from load_balancer import LoadBalancer
from server import Server


class LoadBalancerTestCase(unittest.TestCase):
    def load_balancer_test(self, num_requests: int, num_servers: int):
        test_servers = [Server(str(i), randint(1, 15)) for i in range(0, num_servers)]
        server_weights_sum = sum([server.weight for server in test_servers])

        load_balancer = LoadBalancer(test_servers)

        for i in range(num_requests):
            load_balancer.make_request(f"request_{i}")

        for server in test_servers:
            server_weight_ratio = server.weight / server_weights_sum
            server_request_ratio = server.total_requests / num_requests

            self.assertAlmostEqual(server_request_ratio, server_weight_ratio, 2)

    def test_load_balancing(self):
        test_inputs = [
            [10, 10],
        ]

        for test_input in test_inputs:
            self.load_balancer_test(test_input[0], test_input[1])


if __name__ == '__main__':
    unittest.main()2:["$","$La",null,{"mb":5,"pb":2,"sx":{"width":"100%","display":"flex","flexDirection":"column","justifyContent":"flex-start","alignItems":"flex-start"},"children":[["$","$Lb",null,{"render":true,"targetSiteNavigationState":[{"absoluteSlug":"/dev-ops","title":"Dev Ops"},{"absoluteSlug":"/dev-ops/diy-weighted-load-balancing-python","title":"DIY Weighted Load Balancing in Python"}],"targetPageNavigationState":[{"title":"The Logic","absoluteSlug":"#the-logic"},{"title":"Server Class","absoluteSlug":"#server-class"},{"title":"Load Balancing Logic","absoluteSlug":"#load-balancing-logic"},{"title":"Testing","absoluteSlug":"#testing"},{"title":"Conclusion","absoluteSlug":"#conclusion"}]}],["$","$L11",null,{"container":true,"spacing":2,"mb":0,"children":[["$","$L11",null,{"item":true,"xs":12,"sm":12,"md":4,"sx":{"background":"linear-gradient(to right, #eeeeee, #ffffff)","borderRadius":5},"children":["$","$La",null,{"sx":{"width":"100%","height":"100%","display":"flex","flexDirection":"column","justifyContent":"center","alignItems":"flex-start","paddingBottom":2},"children":[["$","$Lc",null,{"gutterBottom":true,"variant":"h5","component":"h1","children":"DIY Weighted Load Balancing in Python"}],["$","$Lc",null,{"gutterBottom":true,"variant":"p","component":"p","mb":4,"children":"Set up a single-node Kubernetes Cluster (minikube) as well as other tools (Kubectl, Helm, KEDA, etc.) on your local machine."}],["$","$La",null,{"sx":{"width":"100%","display":"flex","flexDirection":"row","justifyContent":"space-between","alignItems":"center","marginBottom":2},"children":[["$","$Lc",null,{"gutterBottom":true,"variant":"p","component":"p","children":"April 17, 2024"}],["$","$Lc",null,{"gutterBottom":true,"variant":"p","component":"p","children":["04m"," Read"]}]]}],"$L12",false]}]}],["$","$L11",null,{"item":true,"xs":12,"sm":12,"md":8,"children":["$","$La",null,{"sx":{"flex":1,"display":"flex","flexDirection":"column","justifyContent":"center","alignItems":"center","marginRight":2},"children":["$","img",null,{"src":"/media/images/diy-weighted-load-balancing-python-thumbnail.jpg","style":{"width":"100%","maxWidth":"75vw","height":"auto","maxHeight":"35vh","objectFit":"cover"}}]}]}]]}],["$","$La",null,{"sx":{"width":"100%"},"children":["$","$L11",null,{"container":true,"spacing":2,"mt":4,"mb":0,"children":[["$","$L11",null,{"item":true,"xs":12,"sm":12,"md":4,"lg":3,"sx":{"background":"linear-gradient(to right, #eeeeee, #ffffff)","borderRadius":5},"children":["$","$La",null,{"sx":{"width":"100%"},"children":[["$","$La",null,{"sx":{"width":"100%","display":{"xs":"block","md":"none"},"marginBottom":2},"children":["$","$L13",null,{"sx":{"width":"100%","marginBottom":2,"boxShadow":3,"backgroundColor":"#ffffff22"},"disableGutters":true,"children":[["$","$L14",null,{"expandIcon":["$","$L15",null,{}],"children":["$","$Lc",null,{"variant":"h6","component":"h6","sx":{"margin":0,"padding":0},"children":"Table of Contents"}]}],["$","$L16",null,{"sx":{"width":"90%","display":"flex","flexDirection":"column","justifyContent":"flex-start","alignItems":"flex-start","marginBottom":2},"children":[["$","a","0",{"href":"#the-logic","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","0",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"The Logic"}]}],["$","a","1",{"href":"#server-class","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","1",{"variant":"p","component":"p","ml":1,"mb":2,"sx":{"&:hover":{"color":"blue"}},"children":"Server Class"}]}],["$","a","2",{"href":"#load-balancing-logic","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","2",{"variant":"p","component":"p","ml":1,"mb":2,"sx":{"&:hover":{"color":"blue"}},"children":"Load Balancing Logic"}]}],["$","a","3",{"href":"#testing","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","3",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Testing"}]}],["$","a","4",{"href":"#conclusion","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","4",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Conclusion"}]}]]}]]}]}],["$","$La",null,{"sx":{"width":"100%","display":{"xs":"none","md":"block"}},"children":[["$","$Lc",null,{"variant":"h5","component":"h5","sx":{"margin":0,"padding":0},"children":"Table of Contents"}],[["$","a","0",{"href":"#the-logic","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","0",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"The Logic"}]}],["$","a","1",{"href":"#server-class","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","1",{"variant":"p","component":"p","ml":1,"mb":2,"sx":{"&:hover":{"color":"blue"}},"children":"Server Class"}]}],["$","a","2",{"href":"#load-balancing-logic","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","2",{"variant":"p","component":"p","ml":1,"mb":2,"sx":{"&:hover":{"color":"blue"}},"children":"Load Balancing Logic"}]}],["$","a","3",{"href":"#testing","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","3",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Testing"}]}],["$","a","4",{"href":"#conclusion","style":{"textDecoration":"none","color":"inherit","&:visited":{"textDecoration":"none","color":"inherit"}},"children":["$","$Lc","4",{"variant":"p","component":"p","ml":0,"mb":2.5,"sx":{"&:hover":{"color":"blue"}},"children":"Conclusion"}]}]]]}]]}]}],["$","$L11",null,{"item":true,"xs":12,"sm":12,"md":8,"lg":9,"sx":{"background":"linear-gradient(to right, #ffffff, #eeeeee)","borderRadius":5},"children":["$","$La",null,{"sx":{"flex":1,"marginRight":2},"children":[["$","$Lc","0",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Load balancing is the process of distributing requests among multiple servers that are serving the same application. Say you have 5 servers with 1 CPU core and 1 GB of RAM in each i.e. all servers have the same computation power. In this case, you could evenly distribute the requests among all servers following a simple Round Robin approach. But, what if some of the machines can take more load than others? For example: consider the following systems:"]}],["$","$Lc","1",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Machine 1: 8 CPUs, 16 GB RAM"]}],["$","$Lc","2",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Machines 2 and 3: 2 CPUs, 4 GB RAM"]}],["$","$Lc","3",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Machines 4 and 5: 1 CPU, 2 GB RAM"]}],["$","$Lc","4",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","We know that Machines 2 and 3 can do twice the computation Machines 4 and 5 can and Machine 1 can do 8 times as much. So it makes sense to router 8 times as many requests to Machine 1 as we are routing to Machine 4 or 5. Today, we'll be writing the logic to do so in Python."]}],["$","$Lc","5",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","I was asked to do this in an interview once, so I decided to write about it. The code for this Post can be found in ",["$","$L17","5-link",{"href":"https://github.com/AbhilakshSinghReen/load-balancing/tree/main/python/weighted_round_robin","rel":"noopener noreferrer","target":"_blank","color":"primary","underline":"hover","children":"this GitHub Repo"}],"."]}],["$","$Lc","6",{"id":"the-logic","variant":"h4","component":"h1","mb":2,"children":["$","strong",null,{"children":"The Logic"}]}],["$","$Lc","7",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Before we write any code, let's quantify things."]}],["$","$Lc","8",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","If Machines 4 and 5 can do ",["$","$La","8-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"x"}]," computation each, Machines 2 and 3 can do ",["$","$La","8-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"2x"}]," each, and Machine 1 can do ",["$","$La","8-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"8x"}],", we have a total of ",["$","$La","8-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"14x"}]," computation."]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"weights = [8, 2, 2, 1, 1]"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["weights "]}],["$","span","code-segement1",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement3",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement4",{"className":"token","style":{"color":"#755f00"},"children":["8"]}],["$","span","code-segement5",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement7",{"className":"token","style":{"color":"#755f00"},"children":["2"]}],["$","span","code-segement8",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement9",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement10",{"className":"token","style":{"color":"#755f00"},"children":["2"]}],["$","span","code-segement11",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement12",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement13",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement14",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement15",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement16",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement17",{"className":"token","style":{"color":"#111b27"},"children":["]"]}]]]}]}]]}],["$","$Lc","10",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","So, if we were to get 14 requests, 8 of them should go to Machine 1, 2 to Machine 2, 2 to Machine 3, 1 to Machine 4, and 1 to Machine 5."]}],["$","$Lc","11",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","So, the probability of the Machines handling requests is as follows:"]}],["$","$Lc","12",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Machine 1: 8/14 = 0.5714"]}],["$","$Lc","13",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Machine 2: 2/14 = 0.1428"]}],["$","$Lc","14",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Machine 3: 2/14 = 0.1428"]}],["$","$Lc","15",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Machine 4: 1/14 = 0.0714"]}],["$","$Lc","16",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","1) Machine 5: 1/14 = 0.0714"]}],["$","$Lc","17",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","All that our Weighted Load Balancer needs to do is route the requests with (approximately) these probabilities."]}],["$","$Lc","18",{"id":"server-class","variant":"h5","component":"h2","mb":2,"children":["$","strong",null,{"children":"Server Class"}]}],["$","$Lc","19",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Let's make a dummy server class that has an ID and can track the total number of requests made to it. We'll put this in ",["$","$La","19-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"server.py"}],"."]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"class Server:\n    def __init__(self, id, weight) -> None:\n        self.id = id\n        self.weight = weight\n        self.total_requests = 0\n\n    def make_request(self, request: str):\n        self.total_requests += 1\n        return True"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"#a04900"},"children":["class"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement2",{"className":"token","style":{"color":"#005a8e"},"children":["Server"]}],["$","span","code-segement3",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement5",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement6",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement7",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement8",{"className":"token","style":{"color":"#7c00aa"},"children":["__init__"]}],["$","span","code-segement9",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement10",{"className":"$undefined","style":{},"children":["self"]}],["$","span","code-segement11",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement12",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement13",{"className":"token","style":{"color":"#af00af"},"children":["id"]}],["$","span","code-segement14",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement15",{"className":"$undefined","style":{},"children":[" weight"]}],["$","span","code-segement16",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement17",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement18",{"className":"token","style":{"color":"#a04900"},"children":["-"]}],["$","span","code-segement19",{"className":"token","style":{"color":"#a04900"},"children":[">"]}],["$","span","code-segement20",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement21",{"className":"token","style":{"color":"#755f00"},"children":["None"]}],["$","span","code-segement22",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement23",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement24",{"className":"$undefined","style":{},"children":["        self"]}],["$","span","code-segement25",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement26",{"className":"token","style":{"color":"#af00af"},"children":["id"]}],["$","span","code-segement27",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement28",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement29",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement30",{"className":"token","style":{"color":"#af00af"},"children":["id"]}],["$","span","code-segement31",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement32",{"className":"$undefined","style":{},"children":["        self"]}],["$","span","code-segement33",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement34",{"className":"$undefined","style":{},"children":["weight "]}],["$","span","code-segement35",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement36",{"className":"$undefined","style":{},"children":[" weight\n"]}],["$","span","code-segement37",{"className":"$undefined","style":{},"children":["        self"]}],["$","span","code-segement38",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement39",{"className":"$undefined","style":{},"children":["total_requests "]}],["$","span","code-segement40",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement41",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement42",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement43",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement45",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement46",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement47",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement48",{"className":"token","style":{"color":"#7c00aa"},"children":["make_request"]}],["$","span","code-segement49",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement50",{"className":"$undefined","style":{},"children":["self"]}],["$","span","code-segement51",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement52",{"className":"$undefined","style":{},"children":[" request"]}],["$","span","code-segement53",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement54",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement55",{"className":"token","style":{"color":"#af00af"},"children":["str"]}],["$","span","code-segement56",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement57",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement58",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement59",{"className":"$undefined","style":{},"children":["        self"]}],["$","span","code-segement60",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement61",{"className":"$undefined","style":{},"children":["total_requests "]}],["$","span","code-segement62",{"className":"token","style":{"color":"#a04900"},"children":["+="]}],["$","span","code-segement63",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement64",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement65",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement66",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement67",{"className":"token","style":{"color":"#a04900"},"children":["return"]}],["$","span","code-segement68",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement69",{"className":"token","style":{"color":"#755f00"},"children":["True"]}]]]}]}]]}],["$","$Lc","21",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","We can create some objects of this class, make requests to them (according to our logic), and check how many requests were made using the ",["$","$La","21-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"total_requests"}]," attribute."]}],["$","$Lc","22",{"id":"load-balancing-logic","variant":"h5","component":"h2","mb":2,"children":["$","strong",null,{"children":"Load Balancing Logic"}]}],["$","$Lc","23",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Most programming languages already have random generators like ",["$","$La","23-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"random.uniform"}]," in Python. We can leverage these to distribute the requests as needed."]}],["$","$Lc","24",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Our server weights are: ",["$","$La","24-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"weights = [8, 2, 2, 1, 1]"}],"."]}],["$","$Lc","25",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Let's have a running sum of this list: ",["$","$La","25-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"weights_sum = [8, 10, 12, 13, 14]"}],"."]}],["$","$Lc","26",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Now, for each request, we'll generate a random float between 0 and 14. If this lies between 0 and 8, the request goes to Server 0. From 8 to 10, the request goes to server 1, and so on."]}],["$","$Lc","27",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","In general, if the random value is greater than weights_sum[i - 1]  and less than weights_sum[i], the request goes to server i."]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"target_server = -1\n\nrandom_value = random_float(0, 14)\nif random_value <= weights_sum[0]:\n    target_server = 0\nelse:\n    for i in range(i, len(weights_sum)):\n        if random_value > weights_sum[i - 1] and random_value <= weights_sum[i]:\n            target_server = i\n            break"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["target_server "]}],["$","span","code-segement1",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement3",{"className":"token","style":{"color":"#a04900"},"children":["-"]}],["$","span","code-segement4",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement5",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement7",{"className":"$undefined","style":{},"children":["random_value "]}],["$","span","code-segement8",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement9",{"className":"$undefined","style":{},"children":[" random_float"]}],["$","span","code-segement10",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement11",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement12",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement13",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement14",{"className":"token","style":{"color":"#755f00"},"children":["14"]}],["$","span","code-segement15",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement16",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement17",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement18",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement19",{"className":"$undefined","style":{},"children":[" random_value "]}],["$","span","code-segement20",{"className":"token","style":{"color":"#a04900"},"children":["<="]}],["$","span","code-segement21",{"className":"$undefined","style":{},"children":[" weights_sum"]}],["$","span","code-segement22",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement23",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement24",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement25",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement26",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement27",{"className":"$undefined","style":{},"children":["    target_server "]}],["$","span","code-segement28",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement29",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement30",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement31",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement32",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement33",{"className":"token","style":{"color":"#a04900"},"children":["else"]}],["$","span","code-segement34",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement35",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement36",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement37",{"className":"token","style":{"color":"#a04900"},"children":["for"]}],["$","span","code-segement38",{"className":"$undefined","style":{},"children":[" i "]}],["$","span","code-segement39",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement40",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement41",{"className":"token","style":{"color":"#af00af"},"children":["range"]}],["$","span","code-segement42",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement43",{"className":"$undefined","style":{},"children":["i"]}],["$","span","code-segement44",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement45",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement46",{"className":"token","style":{"color":"#af00af"},"children":["len"]}],["$","span","code-segement47",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement48",{"className":"$undefined","style":{},"children":["weights_sum"]}],["$","span","code-segement49",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement50",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement51",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement52",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement53",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement54",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement55",{"className":"$undefined","style":{},"children":[" random_value "]}],["$","span","code-segement56",{"className":"token","style":{"color":"#a04900"},"children":[">"]}],["$","span","code-segement57",{"className":"$undefined","style":{},"children":[" weights_sum"]}],["$","span","code-segement58",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement59",{"className":"$undefined","style":{},"children":["i "]}],["$","span","code-segement60",{"className":"token","style":{"color":"#a04900"},"children":["-"]}],["$","span","code-segement61",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement62",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement63",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement64",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement65",{"className":"token","style":{"color":"#a04900"},"children":["and"]}],["$","span","code-segement66",{"className":"$undefined","style":{},"children":[" random_value "]}],["$","span","code-segement67",{"className":"token","style":{"color":"#a04900"},"children":["<="]}],["$","span","code-segement68",{"className":"$undefined","style":{},"children":[" weights_sum"]}],["$","span","code-segement69",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement70",{"className":"$undefined","style":{},"children":["i"]}],["$","span","code-segement71",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement72",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement73",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement74",{"className":"$undefined","style":{},"children":["            target_server "]}],["$","span","code-segement75",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement76",{"className":"$undefined","style":{},"children":[" i\n"]}],["$","span","code-segement77",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement78",{"className":"token","style":{"color":"#a04900"},"children":["break"]}]]]}]}]]}],["$","$Lc","29",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Great, but we have to formalize things. Let's create a new file called ",["$","$La","29-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"load_balancer.py"}],"."]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"$19"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":[" random "]}],["$","span","code-segement2",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[" uniform\n"]}],"\n",["$","span","code-segement5",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement6",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement7",{"className":"$undefined","style":{},"children":[" server "]}],["$","span","code-segement8",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement9",{"className":"$undefined","style":{},"children":[" Server\n"]}],"\n","\n",["$","span","code-segement12",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement13",{"className":"token","style":{"color":"#a04900"},"children":["class"]}],["$","span","code-segement14",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement15",{"className":"token","style":{"color":"#005a8e"},"children":["LoadBalancer"]}],["$","span","code-segement16",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement17",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement18",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement19",{"className":"token","style":{"color":"#116b00"},"children":["\"Weighted Round-Robin Load Balancer\""]}],["$","span","code-segement20",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement22",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement23",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement24",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement25",{"className":"token","style":{"color":"#7c00aa"},"children":["__init__"]}],["$","span","code-segement26",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement27",{"className":"$undefined","style":{},"children":["self"]}],["$","span","code-segement28",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement29",{"className":"$undefined","style":{},"children":[" servers"]}],["$","span","code-segement30",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement31",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement32",{"className":"token","style":{"color":"#af00af"},"children":["list"]}],["$","span","code-segement33",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement34",{"className":"$undefined","style":{},"children":["Server"]}],["$","span","code-segement35",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement36",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement37",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement38",{"className":"token","style":{"color":"#a04900"},"children":["-"]}],["$","span","code-segement39",{"className":"token","style":{"color":"#a04900"},"children":[">"]}],["$","span","code-segement40",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement41",{"className":"token","style":{"color":"#755f00"},"children":["None"]}],["$","span","code-segement42",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement43",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement44",{"className":"$undefined","style":{},"children":["        self"]}],["$","span","code-segement45",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement46",{"className":"$undefined","style":{},"children":["all_servers "]}],["$","span","code-segement47",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement48",{"className":"$undefined","style":{},"children":[" servers\n"]}],["$","span","code-segement49",{"className":"$undefined","style":{},"children":["        self"]}],["$","span","code-segement50",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement51",{"className":"$undefined","style":{},"children":["server_weights_sum "]}],["$","span","code-segement52",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement53",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement54",{"className":"token","style":{"color":"#af00af"},"children":["sum"]}],["$","span","code-segement55",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement56",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement57",{"className":"$undefined","style":{},"children":["server"]}],["$","span","code-segement58",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement59",{"className":"$undefined","style":{},"children":["weight "]}],["$","span","code-segement60",{"className":"token","style":{"color":"#a04900"},"children":["for"]}],["$","span","code-segement61",{"className":"$undefined","style":{},"children":[" server "]}],["$","span","code-segement62",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement63",{"className":"$undefined","style":{},"children":[" servers"]}],["$","span","code-segement64",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement65",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement66",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement67",{"className":"$undefined","style":{},"children":["        self"]}],["$","span","code-segement68",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement69",{"className":"$undefined","style":{},"children":["probability_ranges "]}],["$","span","code-segement70",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement71",{"className":"$undefined","style":{},"children":[" self"]}],["$","span","code-segement72",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement73",{"className":"$undefined","style":{},"children":["compute_probability_ranges"]}],["$","span","code-segement74",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement75",{"className":"$undefined","style":{},"children":["servers"]}],["$","span","code-segement76",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement77",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement79",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement80",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement81",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement82",{"className":"token","style":{"color":"#7c00aa"},"children":["compute_probability_ranges"]}],["$","span","code-segement83",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement84",{"className":"$undefined","style":{},"children":["self"]}],["$","span","code-segement85",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement86",{"className":"$undefined","style":{},"children":[" servers"]}],["$","span","code-segement87",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement88",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement89",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement90",{"className":"$undefined","style":{},"children":["        probability_ranges "]}],["$","span","code-segement91",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement92",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement93",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement94",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement95",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement97",{"className":"$undefined","style":{},"children":["        last_range_end "]}],["$","span","code-segement98",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement99",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement100",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement101",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement102",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement103",{"className":"token","style":{"color":"#a04900"},"children":["for"]}],["$","span","code-segement104",{"className":"$undefined","style":{},"children":[" server "]}],["$","span","code-segement105",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement106",{"className":"$undefined","style":{},"children":[" servers"]}],["$","span","code-segement107",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement108",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement109",{"className":"$undefined","style":{},"children":["            probability_ranges"]}],["$","span","code-segement110",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement111",{"className":"$undefined","style":{},"children":["append"]}],["$","span","code-segement112",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement113",{"className":"token","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement114",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement115",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement116",{"className":"token","style":{"color":"#116b00"},"children":["\"serverId\""]}],["$","span","code-segement117",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement118",{"className":"$undefined","style":{},"children":[" server"]}],["$","span","code-segement119",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement120",{"className":"token","style":{"color":"#af00af"},"children":["id"]}],["$","span","code-segement121",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement122",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement123",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement124",{"className":"token","style":{"color":"#116b00"},"children":["\"rangeStart\""]}],["$","span","code-segement125",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement126",{"className":"$undefined","style":{},"children":[" last_range_end"]}],["$","span","code-segement127",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement128",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement129",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement130",{"className":"token","style":{"color":"#116b00"},"children":["\"rangeEnd\""]}],["$","span","code-segement131",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement132",{"className":"$undefined","style":{},"children":[" last_range_end "]}],["$","span","code-segement133",{"className":"token","style":{"color":"#a04900"},"children":["+"]}],["$","span","code-segement134",{"className":"$undefined","style":{},"children":[" server"]}],["$","span","code-segement135",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement136",{"className":"$undefined","style":{},"children":["weight"]}],["$","span","code-segement137",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement138",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement139",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement140",{"className":"token","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement141",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement142",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement144",{"className":"$undefined","style":{},"children":["            last_range_end "]}],["$","span","code-segement145",{"className":"token","style":{"color":"#a04900"},"children":["+="]}],["$","span","code-segement146",{"className":"$undefined","style":{},"children":[" server"]}],["$","span","code-segement147",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement148",{"className":"$undefined","style":{},"children":["weight\n"]}],"\n",["$","span","code-segement150",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement151",{"className":"token","style":{"color":"#a04900"},"children":["return"]}],["$","span","code-segement152",{"className":"$undefined","style":{},"children":[" probability_ranges\n"]}],"\n",["$","span","code-segement154",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement155",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement156",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement157",{"className":"token","style":{"color":"#7c00aa"},"children":["get_target_server"]}],["$","span","code-segement158",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement159",{"className":"$undefined","style":{},"children":["self"]}],["$","span","code-segement160",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement161",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement162",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement163",{"className":"$undefined","style":{},"children":["        range_specifier "]}],["$","span","code-segement164",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement165",{"className":"$undefined","style":{},"children":[" uniform"]}],["$","span","code-segement166",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement167",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement168",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement169",{"className":"$undefined","style":{},"children":[" self"]}],["$","span","code-segement170",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement171",{"className":"$undefined","style":{},"children":["server_weights_sum"]}],["$","span","code-segement172",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement173",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement175",{"className":"$undefined","style":{},"children":["        target_server_id "]}],["$","span","code-segement176",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement177",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement178",{"className":"token","style":{"color":"#116b00"},"children":["\"\""]}],["$","span","code-segement179",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement180",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement181",{"className":"token","style":{"color":"#a04900"},"children":["for"]}],["$","span","code-segement182",{"className":"$undefined","style":{},"children":[" prob_range "]}],["$","span","code-segement183",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement184",{"className":"$undefined","style":{},"children":[" self"]}],["$","span","code-segement185",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement186",{"className":"$undefined","style":{},"children":["probability_ranges"]}],["$","span","code-segement187",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement188",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement189",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement190",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement191",{"className":"$undefined","style":{},"children":[" range_specifier "]}],["$","span","code-segement192",{"className":"token","style":{"color":"#a04900"},"children":[">="]}],["$","span","code-segement193",{"className":"$undefined","style":{},"children":[" prob_range"]}],["$","span","code-segement194",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement195",{"className":"token","style":{"color":"#116b00"},"children":["\"rangeStart\""]}],["$","span","code-segement196",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement197",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement198",{"className":"token","style":{"color":"#a04900"},"children":["and"]}],["$","span","code-segement199",{"className":"$undefined","style":{},"children":[" range_specifier "]}],["$","span","code-segement200",{"className":"token","style":{"color":"#a04900"},"children":["<"]}],["$","span","code-segement201",{"className":"$undefined","style":{},"children":[" prob_range"]}],["$","span","code-segement202",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement203",{"className":"token","style":{"color":"#116b00"},"children":["\"rangeEnd\""]}],["$","span","code-segement204",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement205",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement206",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement207",{"className":"$undefined","style":{},"children":["                target_server_id "]}],["$","span","code-segement208",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement209",{"className":"$undefined","style":{},"children":[" prob_range"]}],["$","span","code-segement210",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement211",{"className":"token","style":{"color":"#116b00"},"children":["\"serverId\""]}],["$","span","code-segement212",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement213",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement214",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement215",{"className":"token","style":{"color":"#a04900"},"children":["break"]}],["$","span","code-segement216",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement217",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement218",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement219",{"className":"$undefined","style":{},"children":[" target_server_id "]}],["$","span","code-segement220",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement221",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement222",{"className":"token","style":{"color":"#116b00"},"children":["\"\""]}],["$","span","code-segement223",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement224",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement225",{"className":"$undefined","style":{},"children":["            target_server_id "]}],["$","span","code-segement226",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement227",{"className":"$undefined","style":{},"children":[" self"]}],["$","span","code-segement228",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement229",{"className":"$undefined","style":{},"children":["probability_ranges"]}],["$","span","code-segement230",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement231",{"className":"token","style":{"color":"#a04900"},"children":["-"]}],["$","span","code-segement232",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement233",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement234",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement235",{"className":"token","style":{"color":"#116b00"},"children":["\"serverId\""]}],["$","span","code-segement236",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement237",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement239",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement240",{"className":"token","style":{"color":"#a04900"},"children":["for"]}],["$","span","code-segement241",{"className":"$undefined","style":{},"children":[" server "]}],["$","span","code-segement242",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement243",{"className":"$undefined","style":{},"children":[" self"]}],["$","span","code-segement244",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement245",{"className":"$undefined","style":{},"children":["all_servers"]}],["$","span","code-segement246",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement247",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement248",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement249",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement250",{"className":"$undefined","style":{},"children":[" server"]}],["$","span","code-segement251",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement252",{"className":"token","style":{"color":"#af00af"},"children":["id"]}],["$","span","code-segement253",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement254",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement255",{"className":"$undefined","style":{},"children":[" target_server_id"]}],["$","span","code-segement256",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement257",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement258",{"className":"$undefined","style":{},"children":["                "]}],["$","span","code-segement259",{"className":"token","style":{"color":"#a04900"},"children":["return"]}],["$","span","code-segement260",{"className":"$undefined","style":{},"children":[" server\n"]}],"\n",["$","span","code-segement262",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement263",{"className":"token","style":{"color":"#a04900"},"children":["return"]}],["$","span","code-segement264",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement265",{"className":"token","style":{"color":"#755f00"},"children":["False"]}],["$","span","code-segement266",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement268",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement269",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement270",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement271",{"className":"token","style":{"color":"#7c00aa"},"children":["make_request"]}],["$","span","code-segement272",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement273",{"className":"$undefined","style":{},"children":["self"]}],["$","span","code-segement274",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement275",{"className":"$undefined","style":{},"children":[" request"]}],["$","span","code-segement276",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement277",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement278",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement279",{"className":"$undefined","style":{},"children":["        target_server "]}],["$","span","code-segement280",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement281",{"className":"$undefined","style":{},"children":[" self"]}],["$","span","code-segement282",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement283",{"className":"$undefined","style":{},"children":["get_target_server"]}],["$","span","code-segement284",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement285",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement286",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement288",{"className":"$undefined","style":{},"children":["        target_server"]}],["$","span","code-segement289",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement290",{"className":"$undefined","style":{},"children":["make_request"]}],["$","span","code-segement291",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement292",{"className":"$undefined","style":{},"children":["request"]}],["$","span","code-segement293",{"className":"token","style":{"color":"#111b27"},"children":[")"]}]]]}]}]]}],["$","$Lc","31",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","We can initialize our LoadBalancer with a list of servers and make a request using the ",["$","$La","31-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"make_request"}]," function. But we don't know it works unless we test it, do we?"]}],["$","$Lc","32",{"id":"testing","variant":"h4","component":"h1","mb":2,"children":["$","strong",null,{"children":"Testing"}]}],["$","$Lc","33",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","We'll use Python's ",["$","$La","33-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"unittest"}]," module to test how good our logic is. In the same folder, create a file called ",["$","$La","33-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"tests.py"}],". We'll make 2 functions, one that can test a single case with a given number of requests and a number of servers, and another (that will be our test case) that calls the other function with a set of inputs."]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"$1a"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":[" random "]}],["$","span","code-segement2",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[" randint\n"]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement5",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":[" unittest\n"]}],"\n",["$","span","code-segement8",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement9",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement10",{"className":"$undefined","style":{},"children":[" load_balancer "]}],["$","span","code-segement11",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement12",{"className":"$undefined","style":{},"children":[" LoadBalancer\n"]}],["$","span","code-segement13",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement14",{"className":"token","style":{"color":"#a04900"},"children":["from"]}],["$","span","code-segement15",{"className":"$undefined","style":{},"children":[" server "]}],["$","span","code-segement16",{"className":"token","style":{"color":"#a04900"},"children":["import"]}],["$","span","code-segement17",{"className":"$undefined","style":{},"children":[" Server\n"]}],"\n","\n",["$","span","code-segement20",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement21",{"className":"token","style":{"color":"#a04900"},"children":["class"]}],["$","span","code-segement22",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement23",{"className":"token","style":{"color":"#005a8e"},"children":["LoadBalancerTestCase"]}],["$","span","code-segement24",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement25",{"className":"$undefined","style":{},"children":["unittest"]}],["$","span","code-segement26",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement27",{"className":"$undefined","style":{},"children":["TestCase"]}],["$","span","code-segement28",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement29",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement30",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement31",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement32",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement33",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement34",{"className":"token","style":{"color":"#7c00aa"},"children":["load_balancer_test"]}],["$","span","code-segement35",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement36",{"className":"$undefined","style":{},"children":["self"]}],["$","span","code-segement37",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement38",{"className":"$undefined","style":{},"children":[" num_requests"]}],["$","span","code-segement39",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement40",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement41",{"className":"token","style":{"color":"#af00af"},"children":["int"]}],["$","span","code-segement42",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement43",{"className":"$undefined","style":{},"children":[" num_servers"]}],["$","span","code-segement44",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement45",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement46",{"className":"token","style":{"color":"#af00af"},"children":["int"]}],["$","span","code-segement47",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement48",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement49",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement50",{"className":"$undefined","style":{},"children":["        test_servers "]}],["$","span","code-segement51",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement52",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement53",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement54",{"className":"$undefined","style":{},"children":["Server"]}],["$","span","code-segement55",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement56",{"className":"token","style":{"color":"#af00af"},"children":["str"]}],["$","span","code-segement57",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement58",{"className":"$undefined","style":{},"children":["i"]}],["$","span","code-segement59",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement60",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement61",{"className":"$undefined","style":{},"children":[" randint"]}],["$","span","code-segement62",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement63",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement64",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement65",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement66",{"className":"token","style":{"color":"#755f00"},"children":["15"]}],["$","span","code-segement67",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement68",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement69",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement70",{"className":"token","style":{"color":"#a04900"},"children":["for"]}],["$","span","code-segement71",{"className":"$undefined","style":{},"children":[" i "]}],["$","span","code-segement72",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement73",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement74",{"className":"token","style":{"color":"#af00af"},"children":["range"]}],["$","span","code-segement75",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement76",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement77",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement78",{"className":"$undefined","style":{},"children":[" num_servers"]}],["$","span","code-segement79",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement80",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement81",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement82",{"className":"$undefined","style":{},"children":["        server_weights_sum "]}],["$","span","code-segement83",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement84",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement85",{"className":"token","style":{"color":"#af00af"},"children":["sum"]}],["$","span","code-segement86",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement87",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement88",{"className":"$undefined","style":{},"children":["server"]}],["$","span","code-segement89",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement90",{"className":"$undefined","style":{},"children":["weight "]}],["$","span","code-segement91",{"className":"token","style":{"color":"#a04900"},"children":["for"]}],["$","span","code-segement92",{"className":"$undefined","style":{},"children":[" server "]}],["$","span","code-segement93",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement94",{"className":"$undefined","style":{},"children":[" test_servers"]}],["$","span","code-segement95",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement96",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement97",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement99",{"className":"$undefined","style":{},"children":["        load_balancer "]}],["$","span","code-segement100",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement101",{"className":"$undefined","style":{},"children":[" LoadBalancer"]}],["$","span","code-segement102",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement103",{"className":"$undefined","style":{},"children":["test_servers"]}],["$","span","code-segement104",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement105",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement107",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement108",{"className":"token","style":{"color":"#a04900"},"children":["for"]}],["$","span","code-segement109",{"className":"$undefined","style":{},"children":[" i "]}],["$","span","code-segement110",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement111",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement112",{"className":"token","style":{"color":"#af00af"},"children":["range"]}],["$","span","code-segement113",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement114",{"className":"$undefined","style":{},"children":["num_requests"]}],["$","span","code-segement115",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement116",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement117",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement118",{"className":"$undefined","style":{},"children":["            load_balancer"]}],["$","span","code-segement119",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement120",{"className":"$undefined","style":{},"children":["make_request"]}],["$","span","code-segement121",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement122",{"className":"token string-interpolation","style":{"color":"#116b00"},"children":["f\"request_"]}],["$","span","code-segement123",{"className":"token string-interpolation interpolation","style":{"color":"#111b27"},"children":["{"]}],["$","span","code-segement124",{"className":"token string-interpolation interpolation","style":{},"children":["i"]}],["$","span","code-segement125",{"className":"token string-interpolation interpolation","style":{"color":"#111b27"},"children":["}"]}],["$","span","code-segement126",{"className":"token string-interpolation","style":{"color":"#116b00"},"children":["\""]}],["$","span","code-segement127",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement128",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement130",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement131",{"className":"token","style":{"color":"#a04900"},"children":["for"]}],["$","span","code-segement132",{"className":"$undefined","style":{},"children":[" server "]}],["$","span","code-segement133",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement134",{"className":"$undefined","style":{},"children":[" test_servers"]}],["$","span","code-segement135",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement136",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement137",{"className":"$undefined","style":{},"children":["            server_weight_ratio "]}],["$","span","code-segement138",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement139",{"className":"$undefined","style":{},"children":[" server"]}],["$","span","code-segement140",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement141",{"className":"$undefined","style":{},"children":["weight "]}],["$","span","code-segement142",{"className":"token","style":{"color":"#a04900"},"children":["/"]}],["$","span","code-segement143",{"className":"$undefined","style":{},"children":[" server_weights_sum\n"]}],["$","span","code-segement144",{"className":"$undefined","style":{},"children":["            server_request_ratio "]}],["$","span","code-segement145",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement146",{"className":"$undefined","style":{},"children":[" server"]}],["$","span","code-segement147",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement148",{"className":"$undefined","style":{},"children":["total_requests "]}],["$","span","code-segement149",{"className":"token","style":{"color":"#a04900"},"children":["/"]}],["$","span","code-segement150",{"className":"$undefined","style":{},"children":[" num_requests\n"]}],"\n",["$","span","code-segement152",{"className":"$undefined","style":{},"children":["            self"]}],["$","span","code-segement153",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement154",{"className":"$undefined","style":{},"children":["assertAlmostEqual"]}],["$","span","code-segement155",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement156",{"className":"$undefined","style":{},"children":["server_request_ratio"]}],["$","span","code-segement157",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement158",{"className":"$undefined","style":{},"children":[" server_weight_ratio"]}],["$","span","code-segement159",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement160",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement161",{"className":"token","style":{"color":"#755f00"},"children":["2"]}],["$","span","code-segement162",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement163",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement165",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement166",{"className":"token","style":{"color":"#a04900"},"children":["def"]}],["$","span","code-segement167",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement168",{"className":"token","style":{"color":"#7c00aa"},"children":["test_load_balancing"]}],["$","span","code-segement169",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement170",{"className":"$undefined","style":{},"children":["self"]}],["$","span","code-segement171",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement172",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement173",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement174",{"className":"$undefined","style":{},"children":["        test_inputs "]}],["$","span","code-segement175",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement176",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement177",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement178",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement179",{"className":"$undefined","style":{},"children":["            "]}],["$","span","code-segement180",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement181",{"className":"token","style":{"color":"#755f00"},"children":["10"]}],["$","span","code-segement182",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement183",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement184",{"className":"token","style":{"color":"#755f00"},"children":["10"]}],["$","span","code-segement185",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement186",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement187",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement188",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement189",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement190",{"className":"$undefined","style":{},"children":["\n"]}],"\n",["$","span","code-segement192",{"className":"$undefined","style":{},"children":["        "]}],["$","span","code-segement193",{"className":"token","style":{"color":"#a04900"},"children":["for"]}],["$","span","code-segement194",{"className":"$undefined","style":{},"children":[" test_input "]}],["$","span","code-segement195",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement196",{"className":"$undefined","style":{},"children":[" test_inputs"]}],["$","span","code-segement197",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement198",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement199",{"className":"$undefined","style":{},"children":["            self"]}],["$","span","code-segement200",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement201",{"className":"$undefined","style":{},"children":["load_balancer_test"]}],["$","span","code-segement202",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement203",{"className":"$undefined","style":{},"children":["test_input"]}],["$","span","code-segement204",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement205",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement206",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement207",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement208",{"className":"$undefined","style":{},"children":[" test_input"]}],["$","span","code-segement209",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement210",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement211",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement212",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement213",{"className":"$undefined","style":{},"children":["\n"]}],"\n","\n",["$","span","code-segement216",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement217",{"className":"token","style":{"color":"#a04900"},"children":["if"]}],["$","span","code-segement218",{"className":"$undefined","style":{},"children":[" __name__ "]}],["$","span","code-segement219",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement220",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement221",{"className":"token","style":{"color":"#116b00"},"children":["'__main__'"]}],["$","span","code-segement222",{"className":"token","style":{"color":"#111b27"},"children":[":"]}],["$","span","code-segement223",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement224",{"className":"$undefined","style":{},"children":["    unittest"]}],["$","span","code-segement225",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement226",{"className":"$undefined","style":{},"children":["main"]}],["$","span","code-segement227",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement228",{"className":"token","style":{"color":"#111b27"},"children":[")"]}]]]}]}]]}],["$","$Lc","35",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","What we are testing for here is that ",["$","$La","35-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"server_weight_ratio"}]," and ",["$","$La","35-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"server_request_ratio"}]," are almost equal. \\"]}],["$","$Lc","36",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","",["$","$La","36-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"server_weight_ratio"}]," is the weight of a server divided by the sum of the weights of all servers. \\"]}],["$","$Lc","37",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","",["$","$La","37-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"server_request_ratio"}]," is the number of requests processed by this server divided by the total number of requests. \\"]}],["$","$Lc","38",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Let's run the file:"]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"python test.py"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["python test.py"]}]]]}]}]]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"F\n======================================================================\nFAIL: test_load_balancing (__main__.LoadBalancerTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"E:\\learning\\load-balancing\\python\\weighted_round_robin\\tests.py\", line 32, in test_load_balancing\n    self.load_balancer_test(test_input[0], test_input[1])\n  File \"E:\\learning\\load-balancing\\python\\weighted_round_robin\\tests.py\", line 24, in load_balancer_test\n    self.assertAlmostEqual(server_request_ratio, server_weight_ratio, 2)\nAssertionError: 0.2 != 0.16666666666666666 within 2 places (0.033333333333333354 difference)\n\n----------------------------------------------------------------------\nRan 1 test in 0.001s\n\nFAILED (failures=1)"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["F\n"]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement2",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement3",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement4",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement5",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement6",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement7",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement8",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement9",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement10",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement11",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement12",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement13",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement14",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement15",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement16",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement17",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement18",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement19",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement20",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement21",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement22",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement23",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement24",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement25",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement26",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement27",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement28",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement29",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement30",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement31",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement32",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement33",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement34",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement35",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement36",{"className":"token","style":{"color":"#a04900"},"children":["=="]}],["$","span","code-segement37",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement38",{"className":"$undefined","style":{},"children":["FAIL: test_load_balancing "]}],["$","span","code-segement39",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement40",{"className":"$undefined","style":{},"children":["__main__.LoadBalancerTestCase"]}],["$","span","code-segement41",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement42",{"className":"$undefined","style":{},"children":["\n"]}],"----------------------------------------------------------------------\n",["$","span","code-segement44",{"className":"$undefined","style":{},"children":["Traceback "]}],["$","span","code-segement45",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement46",{"className":"$undefined","style":{},"children":["most recent call last"]}],["$","span","code-segement47",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement48",{"className":"$undefined","style":{},"children":[":\n"]}],["$","span","code-segement49",{"className":"$undefined","style":{},"children":["  File "]}],["$","span","code-segement50",{"className":"token","style":{"color":"#116b00"},"children":["\"E:\\learning\\load-balancing\\python\\weighted_round_robin"]}],["$","span","code-segement51",{"className":"token","style":{"color":"#116b00","cursor":"help"},"children":["\\t"]}],["$","span","code-segement52",{"className":"token","style":{"color":"#116b00"},"children":["ests.py\""]}],["$","span","code-segement53",{"className":"$undefined","style":{},"children":[", line "]}],["$","span","code-segement54",{"className":"token","style":{"color":"#755f00"},"children":["32"]}],["$","span","code-segement55",{"className":"$undefined","style":{},"children":[", "]}],["$","span","code-segement56",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement57",{"className":"$undefined","style":{},"children":[" test_load_balancing\n"]}],["$","span","code-segement58",{"className":"$undefined","style":{},"children":["    self.load_balancer_test"]}],["$","span","code-segement59",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement60",{"className":"$undefined","style":{},"children":["test_input"]}],["$","span","code-segement61",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement62",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement63",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement64",{"className":"$undefined","style":{},"children":[", test_input"]}],["$","span","code-segement65",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement66",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement67",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement68",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement69",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement70",{"className":"$undefined","style":{},"children":["  File "]}],["$","span","code-segement71",{"className":"token","style":{"color":"#116b00"},"children":["\"E:\\learning\\load-balancing\\python\\weighted_round_robin"]}],["$","span","code-segement72",{"className":"token","style":{"color":"#116b00","cursor":"help"},"children":["\\t"]}],["$","span","code-segement73",{"className":"token","style":{"color":"#116b00"},"children":["ests.py\""]}],["$","span","code-segement74",{"className":"$undefined","style":{},"children":[", line "]}],["$","span","code-segement75",{"className":"token","style":{"color":"#755f00"},"children":["24"]}],["$","span","code-segement76",{"className":"$undefined","style":{},"children":[", "]}],["$","span","code-segement77",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement78",{"className":"$undefined","style":{},"children":[" load_balancer_test\n"]}],["$","span","code-segement79",{"className":"$undefined","style":{},"children":["    self.assertAlmostEqual"]}],["$","span","code-segement80",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement81",{"className":"$undefined","style":{},"children":["server_request_ratio, server_weight_ratio, "]}],["$","span","code-segement82",{"className":"token","style":{"color":"#755f00"},"children":["2"]}],["$","span","code-segement83",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement84",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement85",{"className":"$undefined","style":{},"children":["AssertionError: "]}],["$","span","code-segement86",{"className":"token","style":{"color":"#755f00"},"children":["0.2"]}],["$","span","code-segement87",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement88",{"className":"token","style":{"color":"#a04900"},"children":["!="]}],["$","span","code-segement89",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement90",{"className":"token","style":{"color":"#755f00"},"children":["0.16666666666666666"]}],["$","span","code-segement91",{"className":"$undefined","style":{},"children":[" within "]}],["$","span","code-segement92",{"className":"token","style":{"color":"#755f00"},"children":["2"]}],["$","span","code-segement93",{"className":"$undefined","style":{},"children":[" places "]}],["$","span","code-segement94",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement95",{"className":"token","style":{"color":"#755f00"},"children":["0.033333333333333354"]}],["$","span","code-segement96",{"className":"$undefined","style":{},"children":[" difference"]}],["$","span","code-segement97",{"className":"token","style":{"color":"#111b27"},"children":[")"]}],["$","span","code-segement98",{"className":"$undefined","style":{},"children":["\n"]}],"\n","----------------------------------------------------------------------\n",["$","span","code-segement101",{"className":"$undefined","style":{},"children":["Ran "]}],["$","span","code-segement102",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement103",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement104",{"className":"token","style":{"color":"#005a8e"},"children":["test"]}],["$","span","code-segement105",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement106",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement107",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement108",{"className":"token","style":{"color":"#755f00"},"children":["0"]}],["$","span","code-segement109",{"className":"$undefined","style":{},"children":[".001s\n"]}],"\n",["$","span","code-segement111",{"className":"$undefined","style":{},"children":["FAILED "]}],["$","span","code-segement112",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement113",{"className":"$undefined","style":{},"children":["failures"]}],["$","span","code-segement114",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement115",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement116",{"className":"token","style":{"color":"#111b27"},"children":[")"]}]]]}]}]]}],["$","$Lc","41",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Uh Oh. This is a standard problem with logics that rely on random numbers: you get the intended result (even distribution) only if your sample size is big enough."]}],["$","$Lc","42",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Let's try a thousand requests with 10 servers."]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"test_inputs = [\n   [1_000, 10],\n]"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["test_inputs "]}],["$","span","code-segement1",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement3",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement5",{"className":"$undefined","style":{},"children":["   "]}],["$","span","code-segement6",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement7",{"className":"token","style":{"color":"#755f00"},"children":["1_000"]}],["$","span","code-segement8",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement9",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement10",{"className":"token","style":{"color":"#755f00"},"children":["10"]}],["$","span","code-segement11",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement12",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement13",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement14",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement15",{"className":"token","style":{"color":"#111b27"},"children":["]"]}]]]}]}]]}],["$","$Lc","44",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Still doesn't work. Let's try a million."]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"test_inputs = [\n    [1_000_000, 10],\n]"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["test_inputs "]}],["$","span","code-segement1",{"className":"token","style":{"color":"#a04900"},"children":["="]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement3",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement5",{"className":"$undefined","style":{},"children":["    "]}],["$","span","code-segement6",{"className":"token","style":{"color":"#111b27"},"children":["["]}],["$","span","code-segement7",{"className":"token","style":{"color":"#755f00"},"children":["1_000_000"]}],["$","span","code-segement8",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement9",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement10",{"className":"token","style":{"color":"#755f00"},"children":["10"]}],["$","span","code-segement11",{"className":"token","style":{"color":"#111b27"},"children":["]"]}],["$","span","code-segement12",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement13",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement14",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement15",{"className":"token","style":{"color":"#111b27"},"children":["]"]}]]]}]}]]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":".\n----------------------------------------------------------------------\nRan 1 test in 1.225s\n\nOK"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-bash","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token","style":{"color":"#005a8e"},"children":["."]}],["$","span","code-segement1",{"className":"$undefined","style":{},"children":["\n"]}],"----------------------------------------------------------------------\n",["$","span","code-segement3",{"className":"$undefined","style":{},"children":["Ran "]}],["$","span","code-segement4",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement5",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement6",{"className":"token","style":{"color":"#005a8e"},"children":["test"]}],["$","span","code-segement7",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement8",{"className":"token","style":{"color":"#a04900"},"children":["in"]}],["$","span","code-segement9",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement10",{"className":"token","style":{"color":"#755f00"},"children":["1"]}],["$","span","code-segement11",{"className":"$undefined","style":{},"children":[".225s\n"]}],"\n","OK"]]}]}]]}],["$","$Lc","47",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","In the line where we check if ",["$","$La","47-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"server_request_ratio"}]," is equal to ",["$","$La","47-text-italics",{"component":"span","sx":{"paddingLeft":0.5,"paddingRight":0.5,"borderRadius":1,"backgroundColor":"rgb(227, 234, 242)"},"children":"server_weight_ratio"}],", we also pass in a third parameter which is the number of decimal places."]}],["$","$La",null,{"sx":{"width":"100%","marginBottom":2},"children":[["$","$L18",null,{"contentToCopy":"self.assertAlmostEqual(server_request_ratio, server_weight_ratio, 2)"}],["$","pre",null,{"style":{"color":"#111b27","background":"#e3eaf2","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":0,"overflow":"auto"},"children":["$","code",null,{"className":"language-python","style":{"color":"#111b27","background":"none","fontFamily":"Consolas, Monaco, \"Andale Mono\", \"Ubuntu Mono\", monospace","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","wordWrap":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"$undefined","style":{},"children":["self"]}],["$","span","code-segement1",{"className":"token","style":{"color":"#111b27"},"children":["."]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":["assertAlmostEqual"]}],["$","span","code-segement3",{"className":"token","style":{"color":"#111b27"},"children":["("]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":["server_request_ratio"]}],["$","span","code-segement5",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":[" server_weight_ratio"]}],["$","span","code-segement7",{"className":"token","style":{"color":"#111b27"},"children":[","]}],["$","span","code-segement8",{"className":"$undefined","style":{},"children":[" "]}],["$","span","code-segement9",{"className":"token","style":{"color":"#755f00"},"children":["2"]}],["$","span","code-segement10",{"className":"token","style":{"color":"#111b27"},"children":[")"]}]]]}]}]]}],["$","$Lc","49",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","As the number of requests increases, you should increase the decimal places as well to check if the distribution is indeed as required."]}],["$","$Lc","50",{"id":"conclusion","variant":"h4","component":"h1","mb":2,"children":["$","strong",null,{"children":"Conclusion"}]}],["$","$Lc","51",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","Excellent. So, now we can be sure that if we get a million requests, they will be routed to the servers based on their computational abilities."]}],["$","$Lc","52",{"variant":"p","component":"p","sx":{"textAlign":"justify","marginBottom":2},"children":["$undefined","See you next time :)"]}]]}]}]]}]}],"$L1b"]}]
1b:["$","$La",null,{"mt":5,"mb":5,"pb":2,"sx":{"width":"100%","display":"flex","flexDirection":"column","justifyContent":"flex-start","alignItems":"center"},"children":["$","$L11",null,{"container":true,"spacing":2,"mt":4,"mb":4,"children":[]}]}]
1c:I[3713,["98","static/chunks/98-98337b3bb708bd24.js","134","static/chunks/134-4d46f2c5e7204b76.js","830","static/chunks/830-8a0df588e7c84864.js","748","static/chunks/748-1f14ee6eb3d7029a.js","411","static/chunks/411-3d27264901e39398.js","533","static/chunks/app/%5BcategorySlug%5D/%5BpostOrSeriesSlug%5D/page-1b889bd6bb1438d9.js"],"default"]
12:["$","$La",null,{"sx":{"width":"100%","display":"flex","flexDirection":"row","justifyContent":"space-between","alignItems":"center"},"children":[["$","$Lc",null,{"variant":"p","component":"p","mr":2,"children":"By: Abhilaksh Singh Reen"}],["$","$L1c",null,{"socialMediaProfiles":[{"network_name":"LinkedIn","profile_url":"https://www.linkedin.com/in/abhilaksh-singh-837901210/","profile_display_name":"Abhilaksh Singh Reen"},{"network_name":"Twitter","profile_url":"https://x.com/TheVeteran06","profile_display_name":"The Veteran 06"},{"network_name":"GitHub","profile_url":"https://github.com/AbhilakshSinghReen","profile_display_name":"Abhilaksh Singh Reen"}]}]]}]
